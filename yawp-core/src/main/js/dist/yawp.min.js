!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.yawp=t():n.yawp=t()}(this,function(){return function(n){function t(e){if(r[e])return r[e].exports;var u=r[e]={exports:{},id:e,loaded:!1};return n[e].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var r={};return t.m=n,t.c=r,t.p="",t(0)}([function(n,t,r){n.exports=r(1)},function(n,t){n.exports=function(){function n(n){var t={baseUrl:function(n){p=n}};n(t)}function t(){for(var n=arguments[0]||{},t=1,r=arguments.length;r>t;t++){var e=arguments[t];for(var u in e)n[u]=e[u]}return n}function r(n){return Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}function e(n,e){var u,o,i,a,c,f,s;s=p+e.url+(e.query?"?"+r(e.query):"");var d={fail:function(n){return u=n,d},done:function(n){return o=n,d},exception:function(n){return i=n,d},then:function(n){return a=n,d},error:function(n){return c=n,d}};return f=new XMLHttpRequest,f.onreadystatechange=function(){4===f.readyState&&(200===f.status?(o&&o(JSON.parse(f.responseText)),a&&a(JSON.parse(f.responseText))):(u&&u(f),c&&c(t({},f,{responseJSON:JSON.parse(f.responseText)})),i&&i(JSON.parse(f.responseText))))},f.open(n,s,e.async),f.setRequestHeader("Content-type","application/json;charset=UTF-8"),f.send(e.data),d}function u(n){if(n.id)return n.id;throw"use yawp(id) if your endpoint does not have a @Id field called id"}function o(n){function t(n){return 1===arguments.length?l.where=n:l.where=[].slice.call(arguments),this}function u(n){return l.order=n,this}function o(n){return l.sort=n,this}function i(n){return l.limit=n,this}function a(t){return e("GET",n()).done(t)}function c(){Object.keys(l).length>0&&n.addQueryParameter("q",JSON.stringify(l))}function f(t){c();var e=p+n().url+(n().query?"?"+r(n().query):"");return t?decodeURIComponent(e):e}function s(t){return c(),e("GET",n()).done(t)}function d(n){return i(1),s(function(t){var r=0==t.length?null:t[0];n&&n(r)})}function y(n){return s(function(t){if(1!=t.length)throw"called only but got "+t.length+" results";n&&n(t[0])})}var l={};return{where:t,order:u,sort:o,limit:i,fetch:a,list:s,first:d,only:y,url:f}}function i(n){function t(t){return n().data=JSON.stringify(t),e("POST",n())}function r(t){return n().data=JSON.stringify(t),e("PUT",n())}function u(t){return n().data=JSON.stringify(t),e("PATCH",n())}function o(){return e("DELETE",n())}return{create:t,update:r,patch:u,destroy:o}}function a(n){function t(t){return n().url+="/"+t,n()}function r(t){return n.setJson(t),this}function u(t){return n.addQueryParameters(t),this}function o(n){return e("GET",t(n))}function i(n){return e("PUT",t(n))}function a(n){return e("PATCH",t(n))}function c(n){return e("POST",t(n))}function f(n){return e("DELETE",t(n))}return{json:r,params:u,get:o,put:i,_patch:a,post:c,_delete:f}}function c(n){function r(n){return n?n instanceof Object?u(n):n:""}function e(){return d}function c(n){var t=r(n);return e().url=t+e().url,this}function f(n){return e.addQueryParameter("t",n),this}function s(){return d.async=!1,this}var d={url:r(n),async:!0};return e.setJson=function(n){d.data=JSON.stringify(n)},e.addQueryParameters=function(n){d.query=t(d.query,n)},e.addQueryParameter=function(n,t){d.query||(d.query={}),d.query[n]=t},t({from:c,transform:f,sync:s},o(e),i(e),a(e))}function f(n){var t=u(n);return c(t).update(n)}function s(n){var t=u(n);return c(t).patch(n)}function d(n){var t=u(n);return c(t).destroy(n)}var p="/api",y={config:n,update:f,patch:s,destroy:d};return t(c,y)}()}])});
//# sourceMappingURL=yawp.min.js.map