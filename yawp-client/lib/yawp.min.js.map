{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///yawp.min.js","webpack:///webpack/bootstrap 09b28e9d069a8ea180c5","webpack:///./src/index.js","webpack:///./src/yawp.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_yawp","_yawp2","config","callback","baseUrl","url","_baseUrl","extend","result","arguments","i","l","length","attrname","toUrlParam","jsonParams","keys","map","k","encodeURIComponent","join","defaultAjax","type","options","_fail","_done","_exception","_then","_error","request","query","callbacks","fail","onreadystatechange","done","exception","then","error","XMLHttpRequest","readyState","status","JSON","parse","responseText","responseJSON","open","async","setRequestHeader","send","data","extractId","object","where","q","slice","order","sort","limit","fetch","setupQuery","addQueryParameter","stringify","decode","decodeURIComponent","list","first","objects","only","repository","create","update","patch","destroy","actions","actionOptions","action","json","setJson","params","addQueryParameters","get","put","_patch","post","_delete","yawp","baseArg","normalize","arg","ajaxOptions","from","parentBaseArg","parentBase","transform","t","sync","key","api"],"mappings":"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","file":"yawp.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _yawp = __webpack_require__(1);\n\t\n\tvar _yawp2 = _interopRequireDefault(_yawp);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\texports.default = _yawp2.default;\n\n\t//export default class Library {\n\t//    constructor() {\n\t//        this._name = 'Library';\n\t//    }\n\t//\n\t//    get name() {\n\t//        return this._name;\n\t//    }\n\t//}\n\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function () {\n\t\n\t    var _baseUrl = '/api';\n\t\n\t    function config(callback) {\n\t        var c = {\n\t            baseUrl: function baseUrl(url) {\n\t                _baseUrl = url;\n\t            }\n\t        };\n\t\n\t        callback(c);\n\t    }\n\t\n\t    function extend() {\n\t        var result = arguments[0] || {};\n\t\n\t        for (var i = 1, l = arguments.length; i < l; i++) {\n\t            var obj = arguments[i];\n\t            for (var attrname in obj) {\n\t                result[attrname] = obj[attrname];\n\t            }\n\t        }\n\t\n\t        return result;\n\t    }\n\t\n\t    function toUrlParam(jsonParams) {\n\t        return Object.keys(jsonParams).map(function (k) {\n\t            return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n\t        }).join('&');\n\t    }\n\t\n\t    function defaultAjax(type, options) {\n\t        var _fail, _done, _exception, _then, _error, request, url;\n\t\n\t        url = _baseUrl + options.url + (options.query ? '?' + toUrlParam(options.query) : '');\n\t\n\t        var callbacks = {\n\t            fail: function fail(callback) {\n\t                _fail = callback;\n\t                request.onreadystatechange();\n\t                return callbacks;\n\t            },\n\t            done: function done(callback) {\n\t                _done = callback;\n\t                request.onreadystatechange();\n\t                return callbacks;\n\t            },\n\t            exception: function exception(callback) {\n\t                _exception = callback;\n\t                request.onreadystatechange();\n\t                return callbacks;\n\t            },\n\t            then: function then(callback) {\n\t                _then = callback;\n\t                request.onreadystatechange();\n\t                return callbacks;\n\t            },\n\t            error: function error(callback) {\n\t                _error = callback;\n\t                request.onreadystatechange();\n\t                return callbacks;\n\t            }\n\t        };\n\t\n\t        request = new XMLHttpRequest();\n\t        request.onreadystatechange = function () {\n\t            if (request.readyState === 4) {\n\t                if (request.status === 200) {\n\t                    if (_done) {\n\t                        _done(JSON.parse(request.responseText));\n\t                    }\n\t                    if (_then) {\n\t                        _then(JSON.parse(request.responseText));\n\t                    }\n\t                } else {\n\t                    if (_fail) {\n\t                        _fail(request);\n\t                    }\n\t                    if (_error) {\n\t                        _error(extend({}, request, { responseJSON: JSON.parse(request.responseText) }));\n\t                    }\n\t                    if (_exception) {\n\t                        _exception(JSON.parse(request.responseText));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t\n\t        request.open(type, url, options.async);\n\t        request.setRequestHeader('Content-type', 'application/json;charset=UTF-8');\n\t        request.send(options.data);\n\t\n\t        return callbacks;\n\t    }\n\t\n\t    function extractId(object) {\n\t        if (object.id) {\n\t            return object.id;\n\t        }\n\t        throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n\t    }\n\t\n\t    function query(options) {\n\t        var q = {};\n\t\n\t        function where(data) {\n\t            if (arguments.length === 1) {\n\t                q.where = data;\n\t            } else {\n\t                q.where = [].slice.call(arguments);\n\t            }\n\t            return this;\n\t        }\n\t\n\t        function order(data) {\n\t            q.order = data;\n\t            return this;\n\t        }\n\t\n\t        function sort(data) {\n\t            q.sort = data;\n\t            return this;\n\t        }\n\t\n\t        function limit(data) {\n\t            q.limit = data;\n\t            return this;\n\t        }\n\t\n\t        function fetch(callback) {\n\t            return defaultAjax('GET', options()).done(callback);\n\t        }\n\t\n\t        function setupQuery() {\n\t            if (Object.keys(q).length > 0) {\n\t                options.addQueryParameter('q', JSON.stringify(q));\n\t            }\n\t        }\n\t\n\t        function url(decode) {\n\t            setupQuery();\n\t            var url = _baseUrl + options().url + (options().query ? '?' + toUrlParam(options().query) : '');\n\t            if (decode) {\n\t                return decodeURIComponent(url);\n\t            }\n\t            return url;\n\t        }\n\t\n\t        function list(callback) {\n\t            setupQuery();\n\t            return defaultAjax('GET', options()).done(callback);\n\t        }\n\t\n\t        function first(callback) {\n\t            limit(1);\n\t\n\t            return list(function (objects) {\n\t                var object = objects.length === 0 ? null : objects[0];\n\t                if (callback) {\n\t                    callback(object);\n\t                }\n\t            });\n\t        }\n\t\n\t        function only(callback) {\n\t            return list(function (objects) {\n\t                if (objects.length !== 1) {\n\t                    throw 'called only but got ' + objects.length + ' results';\n\t                }\n\t                if (callback) {\n\t                    callback(objects[0]);\n\t                }\n\t            });\n\t        }\n\t\n\t        return {\n\t            where: where,\n\t            order: order,\n\t            sort: sort,\n\t            limit: limit,\n\t            fetch: fetch,\n\t            list: list,\n\t            first: first,\n\t            only: only,\n\t            url: url\n\t        };\n\t    }\n\t\n\t    function repository(options) {\n\t        function create(object) {\n\t            options().data = JSON.stringify(object);\n\t            return defaultAjax('POST', options());\n\t        }\n\t\n\t        function update(object) {\n\t            options().data = JSON.stringify(object);\n\t            return defaultAjax('PUT', options());\n\t        }\n\t\n\t        function patch(object) {\n\t            options().data = JSON.stringify(object);\n\t            return defaultAjax('PATCH', options());\n\t        }\n\t\n\t        function destroy() {\n\t            return defaultAjax('DELETE', options());\n\t        }\n\t\n\t        return {\n\t            create: create,\n\t            update: update,\n\t            patch: patch,\n\t            destroy: destroy\n\t        };\n\t    }\n\t\n\t    function actions(options) {\n\t        function actionOptions(action) {\n\t            options().url += '/' + action;\n\t            return options();\n\t        }\n\t\n\t        function json(object) {\n\t            options.setJson(object);\n\t            return this;\n\t        }\n\t\n\t        function params(params) {\n\t            options.addQueryParameters(params);\n\t            return this;\n\t        }\n\t\n\t        function get(action) {\n\t            return defaultAjax('GET', actionOptions(action));\n\t        }\n\t\n\t        function put(action) {\n\t            return defaultAjax('PUT', actionOptions(action));\n\t        }\n\t\n\t        function _patch(action) {\n\t            return defaultAjax('PATCH', actionOptions(action));\n\t        }\n\t\n\t        function post(action) {\n\t            return defaultAjax('POST', actionOptions(action));\n\t        }\n\t\n\t        function _delete(action) {\n\t            return defaultAjax('DELETE', actionOptions(action));\n\t        }\n\t\n\t        return {\n\t            json: json,\n\t            params: params,\n\t            get: get,\n\t            put: put,\n\t            _patch: _patch,\n\t            post: post,\n\t            _delete: _delete\n\t        };\n\t    }\n\t\n\t    function yawp(baseArg) {\n\t        function normalize(arg) {\n\t            if (!arg) {\n\t                return '';\n\t            }\n\t            if (arg instanceof Object) {\n\t                return extractId(arg);\n\t            }\n\t            return arg;\n\t        }\n\t\n\t        var ajaxOptions = {\n\t            url: normalize(baseArg),\n\t            async: true\n\t        };\n\t\n\t        function options() {\n\t            return ajaxOptions;\n\t        }\n\t\n\t        options.setJson = function (object) {\n\t            ajaxOptions.data = JSON.stringify(object);\n\t        };\n\t\n\t        options.addQueryParameters = function (params) {\n\t            ajaxOptions.query = extend(ajaxOptions.query, params);\n\t        };\n\t\n\t        options.addQueryParameter = function (key, value) {\n\t            if (!ajaxOptions.query) {\n\t                ajaxOptions.query = {};\n\t            }\n\t            ajaxOptions.query[key] = value;\n\t        };\n\t\n\t        function from(parentBaseArg) {\n\t            var parentBase = normalize(parentBaseArg);\n\t            options().url = parentBase + options().url;\n\t            return this;\n\t        }\n\t\n\t        function transform(t) {\n\t            options.addQueryParameter('t', t);\n\t            return this;\n\t        }\n\t\n\t        function sync() {\n\t            ajaxOptions.async = false;\n\t            return this;\n\t        }\n\t\n\t        return extend({\n\t            from: from,\n\t            transform: transform,\n\t            sync: sync\n\t        }, query(options), repository(options), actions(options));\n\t    }\n\t\n\t    function update(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).update(object);\n\t    }\n\t\n\t    function patch(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).patch(object);\n\t    }\n\t\n\t    function destroy(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).destroy(object);\n\t    }\n\t\n\t    var api = {\n\t        config: config,\n\t        update: update,\n\t        patch: patch,\n\t        destroy: destroy\n\t    };\n\t\n\t    return extend(yawp, api);\n\t}();\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** yawp.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 09b28e9d069a8ea180c5\n **/","import yawp from './yawp';\n\nexport default yawp;\n\n//export default class Library {\n//    constructor() {\n//        this._name = 'Library';\n//    }\n//\n//    get name() {\n//        return this._name;\n//    }\n//}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","export default (function () {\n\n    var baseUrl = '/api';\n\n    function config(callback) {\n        var c = {\n            baseUrl: function (url) {\n                baseUrl = url;\n            }\n        };\n\n        callback(c);\n    }\n\n    function extend() {\n        var result = arguments[0] || {};\n\n        for (var i = 1, l = arguments.length; i < l; i++) {\n            var obj = arguments[i];\n            for (var attrname in obj) {\n                result[attrname] = obj[attrname];\n            }\n        }\n\n        return result;\n    }\n\n    function toUrlParam(jsonParams) {\n        return Object.keys(jsonParams).map(function (k) {\n            return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n        }).join('&');\n    }\n\n    function defaultAjax(type, options) {\n        var fail\n            , done\n            , exception\n            , then\n            , error\n            , request\n            , url;\n\n        url = baseUrl + options.url + (options.query ? '?' + toUrlParam(options.query) : '');\n\n        var callbacks = {\n            fail: function (callback) {\n                fail = callback;\n                request.onreadystatechange();\n                return callbacks;\n            },\n            done: function (callback) {\n                done = callback;\n                request.onreadystatechange();\n                return callbacks;\n            },\n            exception: function (callback) {\n                exception = callback;\n                request.onreadystatechange();\n                return callbacks;\n            },\n            then: function (callback) {\n                then = callback;\n                request.onreadystatechange();\n                return callbacks;\n            },\n            error: function (callback) {\n                error = callback;\n                request.onreadystatechange();\n                return callbacks;\n            }\n        };\n\n        request = new XMLHttpRequest();\n        request.onreadystatechange = function () {\n            if (request.readyState === 4) {\n                if (request.status === 200) {\n                    if (done) {\n                        done(JSON.parse(request.responseText));\n                    }\n                    if (then) {\n                        then(JSON.parse(request.responseText));\n                    }\n                } else {\n                    if (fail) {\n                        fail(request);\n                    }\n                    if (error) {\n                        error(extend({}, request, {responseJSON: JSON.parse(request.responseText)}));\n                    }\n                    if (exception) {\n                        exception(JSON.parse(request.responseText));\n                    }\n                }\n            }\n        };\n\n        request.open(type, url, options.async);\n        request.setRequestHeader('Content-type', 'application/json;charset=UTF-8');\n        request.send(options.data);\n\n        return callbacks;\n    }\n\n    function extractId(object) {\n        if (object.id) {\n            return object.id;\n        }\n        throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n    }\n\n    function query(options) {\n        var q = {};\n\n        function where(data) {\n            if (arguments.length === 1) {\n                q.where = data;\n            } else {\n                q.where = [].slice.call(arguments);\n            }\n            return this;\n        }\n\n        function order(data) {\n            q.order = data;\n            return this;\n        }\n\n        function sort(data) {\n            q.sort = data;\n            return this;\n        }\n\n        function limit(data) {\n            q.limit = data;\n            return this;\n        }\n\n        function fetch(callback) {\n            return defaultAjax('GET', options()).done(callback);\n        }\n\n        function setupQuery() {\n            if (Object.keys(q).length > 0) {\n                options.addQueryParameter('q', JSON.stringify(q));\n            }\n        }\n\n        function url(decode) {\n            setupQuery();\n            var url = baseUrl + options().url + (options().query ? '?' + toUrlParam(options().query) : '');\n            if (decode) {\n                return decodeURIComponent(url);\n            }\n            return url;\n        }\n\n        function list(callback) {\n            setupQuery();\n            return defaultAjax('GET', options()).done(callback);\n        }\n\n        function first(callback) {\n            limit(1);\n\n            return list(function (objects) {\n                var object = objects.length === 0 ? null : objects[0];\n                if (callback) {\n                    callback(object);\n                }\n            });\n        }\n\n        function only(callback) {\n            return list(function (objects) {\n                if (objects.length !== 1) {\n                    throw 'called only but got ' + objects.length + ' results';\n                }\n                if (callback) {\n                    callback(objects[0]);\n                }\n            });\n        }\n\n        return {\n            where: where,\n            order: order,\n            sort: sort,\n            limit: limit,\n            fetch: fetch,\n            list: list,\n            first: first,\n            only: only,\n            url: url\n        };\n    }\n\n    function repository(options) {\n        function create(object) {\n            options().data = JSON.stringify(object);\n            return defaultAjax('POST', options());\n        }\n\n        function update(object) {\n            options().data = JSON.stringify(object);\n            return defaultAjax('PUT', options());\n        }\n\n        function patch(object) {\n            options().data = JSON.stringify(object);\n            return defaultAjax('PATCH', options());\n        }\n\n        function destroy() {\n            return defaultAjax('DELETE', options());\n        }\n\n        return {\n            create: create,\n            update: update,\n            patch: patch,\n            destroy: destroy\n        };\n    }\n\n    function actions(options) {\n        function actionOptions(action) {\n            options().url += '/' + action;\n            return options();\n        }\n\n        function json(object) {\n            options.setJson(object);\n            return this;\n        }\n\n        function params(params) {\n            options.addQueryParameters(params);\n            return this;\n        }\n\n        function get(action) {\n            return defaultAjax('GET', actionOptions(action));\n        }\n\n        function put(action) {\n            return defaultAjax('PUT', actionOptions(action));\n        }\n\n        function _patch(action) {\n            return defaultAjax('PATCH', actionOptions(action));\n        }\n\n        function post(action) {\n            return defaultAjax('POST', actionOptions(action));\n        }\n\n        function _delete(action) {\n            return defaultAjax('DELETE', actionOptions(action));\n        }\n\n        return {\n            json: json,\n            params: params,\n            get: get,\n            put: put,\n            _patch: _patch,\n            post: post,\n            _delete: _delete\n        };\n    }\n\n    function yawp(baseArg) {\n        function normalize(arg) {\n            if (!arg) {\n                return '';\n            }\n            if (arg instanceof Object) {\n                return extractId(arg);\n            }\n            return arg;\n        }\n\n        var ajaxOptions = {\n            url: normalize(baseArg),\n            async: true\n        };\n\n        function options() {\n            return ajaxOptions;\n        }\n\n        options.setJson = function (object) {\n            ajaxOptions.data = JSON.stringify(object);\n        };\n\n        options.addQueryParameters = function (params) {\n            ajaxOptions.query = extend(ajaxOptions.query, params);\n        };\n\n        options.addQueryParameter = function (key, value) {\n            if (!ajaxOptions.query) {\n                ajaxOptions.query = {};\n            }\n            ajaxOptions.query[key] = value;\n        };\n\n        function from(parentBaseArg) {\n            var parentBase = normalize(parentBaseArg);\n            options().url = parentBase + options().url;\n            return this;\n        }\n\n        function transform(t) {\n            options.addQueryParameter('t', t);\n            return this;\n        }\n\n        function sync() {\n            ajaxOptions.async = false;\n            return this;\n        }\n\n        return extend({\n            from: from,\n            transform: transform,\n            sync: sync\n        }, query(options), repository(options), actions(options));\n    }\n\n    function update(object) {\n        var id = extractId(object);\n        return yawp(id).update(object);\n    }\n\n    function patch(object) {\n        var id = extractId(object);\n        return yawp(id).patch(object);\n    }\n\n    function destroy(object) {\n        var id = extractId(object);\n        return yawp(id).destroy(object);\n    }\n\n    var api = {\n        config: config,\n        update: update,\n        patch: patch,\n        destroy: destroy\n    };\n\n    return extend(yawp, api);\n\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/yawp.js\n **/"],"sourceRoot":""}