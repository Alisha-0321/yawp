{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///yawp.min.js","webpack:///webpack/bootstrap 5a484767266d96bcf35a","webpack:///./src/web/index.js","webpack:///./src/web/request.js","webpack:///./src/commons/utils.js","webpack:///./src/commons/yawp2.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_request","_request2","yawp","resolveOrReject","request","options","resolve","reject","readyState","status","json","JSON","parse","responseText","setHeaders","headers","_utils","extend","Accept","Content-Type","key","hasOwnProperty","setRequestHeader","url","Promise","query","XMLHttpRequest","onreadystatechange","open","method","toUrlParam","send","body","result","arguments","i","l","length","attrname","jsonParams","keys","map","k","encodeURIComponent","join","_classCallCheck","instance","Constructor","TypeError","normalize","arg","extractId","hasId","object","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","_baseUrl","_defaultFetchOptions","yawpFn","baseArg","q","Yawp","cb","promise","createOrUpdate","then","update","create","_options","clear","type","prepareRequestOptions","parentBaseArg","parentBase","t","param","data","where","slice","order","sort","limit","baseRequest","stringify","setupQuery","list","objects","_params","verb","path","action","config","baseUrl","defaultFetchOptions","patch","destroy","baseApi"],"mappings":"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","file":"yawp.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _request = __webpack_require__(1);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar yawp = __webpack_require__(3)(_request2.default);\n\t\n\texports.default = yawp;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (url, options) {\n\t    return new Promise(function (resolve, reject) {\n\t        var query = options.query;\n\t        delete options.query;\n\t\n\t        var request = new XMLHttpRequest();\n\t\n\t        request.onreadystatechange = function () {\n\t            resolveOrReject(request, options, resolve, reject);\n\t        };\n\t\n\t        request.open(options.method, url + (query ? '?' + (0, _utils.toUrlParam)(query) : ''));\n\t        setHeaders(request, options.headers);\n\t        request.send(options.body);\n\t    });\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tfunction resolveOrReject(request, options, resolve, reject) {\n\t    if (request.readyState === 4) {\n\t        if (request.status === 200) {\n\t            resolve(options.json ? JSON.parse(request.responseText) : request.responseText);\n\t        } else {\n\t            reject(request);\n\t        }\n\t    }\n\t}\n\t\n\tfunction setHeaders(request, headers) {\n\t    headers = headers || {};\n\t    (0, _utils.extend)(headers, {\n\t        'Accept': 'application/json',\n\t        'Content-Type': 'application/json;charset=UTF-8'\n\t    });\n\t    for (var key in headers) {\n\t        if (headers.hasOwnProperty(key)) {\n\t            request.setRequestHeader(key, headers[key]);\n\t        }\n\t    }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.extend = extend;\n\texports.toUrlParam = toUrlParam;\n\tfunction extend() {\n\t    var result = arguments[0] || {};\n\t\n\t    for (var i = 1, l = arguments.length; i < l; i++) {\n\t        var obj = arguments[i];\n\t        for (var attrname in obj) {\n\t            result[attrname] = obj[attrname];\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction toUrlParam(jsonParams) {\n\t    return Object.keys(jsonParams).map(function (k) {\n\t        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n\t    }).join('&');\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar _baseUrl = '/api';\n\tvar _defaultFetchOptions = {};\n\t\n\tfunction normalize(arg) {\n\t    if (!arg) {\n\t        return '';\n\t    }\n\t    if (arg instanceof Object) {\n\t        return extractId(arg);\n\t    }\n\t    return arg;\n\t}\n\t\n\tfunction hasId(object) {\n\t    return object.id;\n\t}\n\t\n\tfunction extractId(object) {\n\t    if (hasId(object)) {\n\t        return object.id;\n\t    }\n\t    throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n\t}\n\t\n\texports.default = function (request) {\n\t\n\t    function yawpFn(baseArg) {\n\t\n\t        var options = {};\n\t        var q = {};\n\t\n\t        var Yawp = function () {\n\t            function Yawp(props) {\n\t                _classCallCheck(this, Yawp);\n\t\n\t                (0, _utils.extend)(this, props);\n\t            }\n\t\n\t            // request\n\t\n\t            _createClass(Yawp, [{\n\t                key: 'save',\n\t\n\t\n\t                // instance method\n\t\n\t                value: function save(cb) {\n\t                    var promise = this.createOrUpdate();\n\t                    return cb ? promise.then(cb) : promise;\n\t                }\n\t            }, {\n\t                key: 'createOrUpdate',\n\t                value: function createOrUpdate() {\n\t                    var promise;\n\t                    if (hasId(this)) {\n\t                        options.url = this.id;\n\t                        promise = Yawp.update(this);\n\t                    } else {\n\t                        promise = Yawp.create(this);\n\t                    }\n\t                    return promise;\n\t                }\n\t            }], [{\n\t                key: 'clear',\n\t                value: function clear() {\n\t                    options = {\n\t                        url: normalize(baseArg)\n\t                    };\n\t                }\n\t            }, {\n\t                key: 'prepareRequestOptions',\n\t                value: function prepareRequestOptions() {\n\t                    var _options = (0, _utils.extend)({}, options);\n\t                    Yawp.clear();\n\t                    return _options;\n\t                }\n\t            }, {\n\t                key: 'baseRequest',\n\t                value: function baseRequest(type) {\n\t                    var options = Yawp.prepareRequestOptions();\n\t\n\t                    var url = _baseUrl + options.url;\n\t                    delete options.url;\n\t\n\t                    options.method = type;\n\t                    options.json = true;\n\t                    (0, _utils.extend)(options, _defaultFetchOptions);\n\t\n\t                    //console.log('r', url, options);\n\t\n\t                    return request(url, options);\n\t                }\n\t\n\t                // query\n\t\n\t            }, {\n\t                key: 'from',\n\t                value: function from(parentBaseArg) {\n\t                    var parentBase = normalize(parentBaseArg);\n\t                    options.url = parentBase + options.url;\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'transform',\n\t                value: function transform(t) {\n\t                    Yawp.param('t', t);\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'where',\n\t                value: function where(data) {\n\t                    if (arguments.length === 1) {\n\t                        q.where = data;\n\t                    } else {\n\t                        q.where = [].slice.call(arguments);\n\t                    }\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'order',\n\t                value: function order(data) {\n\t                    q.order = data;\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'sort',\n\t                value: function sort(data) {\n\t                    q.sort = data;\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'limit',\n\t                value: function limit(data) {\n\t                    q.limit = data;\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'fetch',\n\t                value: function fetch(cb) {\n\t                    var promise = Yawp.baseRequest('GET');\n\t                    if (cb) {\n\t                        return promise.then(cb);\n\t                    }\n\t                    return promise;\n\t                }\n\t            }, {\n\t                key: 'setupQuery',\n\t                value: function setupQuery() {\n\t                    if (Object.keys(q).length > 0) {\n\t                        Yawp.param('q', JSON.stringify(q));\n\t                    }\n\t                }\n\t                //\n\t                //static url(decode) {\n\t                //    Yawp.setupQuery();\n\t                //    var url = baseUrl + options.url + (options.query ? '?' + toUrlParam(options.query) : '');\n\t                //    return decode ? decodeURIComponent(url) : url;\n\t                //}\n\t\n\t            }, {\n\t                key: 'list',\n\t                value: function list(cb) {\n\t                    Yawp.setupQuery();\n\t                    var promise = Yawp.baseRequest('GET');\n\t                    if (cb) {\n\t                        return promise.then(cb);\n\t                    }\n\t                    return promise;\n\t                }\n\t            }, {\n\t                key: 'first',\n\t                value: function first(cb) {\n\t                    Yawp.limit(1);\n\t\n\t                    return Yawp.list(function (objects) {\n\t                        var object = objects.length === 0 ? null : objects[0];\n\t                        return cb ? cb(object) : object;\n\t                    });\n\t                }\n\t            }, {\n\t                key: 'only',\n\t                value: function only(cb) {\n\t                    return Yawp.list(function (objects) {\n\t                        if (objects.length !== 1) {\n\t                            throw 'called only but got ' + objects.length + ' results';\n\t                        }\n\t                        var object = objects[0];\n\t                        return cb ? cb(object) : object;\n\t                    });\n\t                }\n\t\n\t                // repository\n\t\n\t            }, {\n\t                key: 'create',\n\t                value: function create(object) {\n\t                    options.body = JSON.stringify(object);\n\t                    return Yawp.baseRequest('POST');\n\t                }\n\t            }, {\n\t                key: 'update',\n\t                value: function update(object) {\n\t                    options.body = JSON.stringify(object);\n\t                    return Yawp.baseRequest('PUT');\n\t                }\n\t            }, {\n\t                key: 'patch',\n\t                value: function patch(object) {\n\t                    options.body = JSON.stringify(object);\n\t                    return Yawp.baseRequest('PATCH');\n\t                }\n\t            }, {\n\t                key: 'destroy',\n\t                value: function destroy() {\n\t                    return Yawp.baseRequest('DELETE');\n\t                }\n\t\n\t                // actions\n\t\n\t            }, {\n\t                key: 'json',\n\t                value: function json(object) {\n\t                    options.body = JSON.stringify(object);\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'params',\n\t                value: function params(_params) {\n\t                    options.query = (0, _utils.extend)(options.query, _params);\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'param',\n\t                value: function param(key, value) {\n\t                    if (!options.query) {\n\t                        options.query = {};\n\t                    }\n\t                    options.query[key] = value;\n\t                }\n\t            }, {\n\t                key: 'action',\n\t                value: function action(verb, path) {\n\t                    options.url += '/' + path;\n\t                    return Yawp.baseRequest(verb);\n\t                }\n\t            }, {\n\t                key: 'get',\n\t                value: function get(action) {\n\t                    return Yawp.action('GET', action);\n\t                }\n\t            }, {\n\t                key: 'put',\n\t                value: function put(action) {\n\t                    return Yawp.action('PUT', action);\n\t                }\n\t            }, {\n\t                key: '_patch',\n\t                value: function _patch(action) {\n\t                    return Yawp.action('PATCH', action);\n\t                }\n\t            }, {\n\t                key: 'post',\n\t                value: function post(action) {\n\t                    return Yawp.action('POST', action);\n\t                }\n\t            }, {\n\t                key: '_delete',\n\t                value: function _delete(action) {\n\t                    return Yawp.action('DELETE', action);\n\t                }\n\t            }]);\n\t\n\t            return Yawp;\n\t        }();\n\t\n\t        Yawp.clear();\n\t        return Yawp;\n\t    }\n\t\n\t    // base api\n\t\n\t    function config(cb) {\n\t        var c = {\n\t            baseUrl: function baseUrl(url) {\n\t                _baseUrl = url;\n\t            },\n\t            defaultFetchOptions: function defaultFetchOptions(options) {\n\t                _defaultFetchOptions = options;\n\t            }\n\t        };\n\t        cb(c);\n\t    };\n\t\n\t    function update(object) {\n\t        var id = extractId(object);\n\t        return yawpFn(id).update(object);\n\t    }\n\t\n\t    function patch(object) {\n\t        var id = extractId(object);\n\t        return yawpFn(id).patch(object);\n\t    }\n\t\n\t    function destroy(object) {\n\t        var id = extractId(object);\n\t        return yawpFn(id).destroy(object);\n\t    }\n\t\n\t    var baseApi = {\n\t        config: config,\n\t        update: update,\n\t        patch: patch,\n\t        destroy: destroy\n\t    };\n\t\n\t    return (0, _utils.extend)(yawpFn, baseApi);\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** yawp.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5a484767266d96bcf35a\n **/","import request from './request';\n\nvar yawp = require('./../commons/yawp2')(request);\n\nexport default yawp;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/index.js\n **/","import { extend, toUrlParam } from '../commons/utils';\n\nexport default function (url, options) {\n    return new Promise((resolve, reject) => {\n        var query = options.query;\n        delete options.query;\n\n        var request = new XMLHttpRequest();\n\n        request.onreadystatechange = function () {\n            resolveOrReject(request, options, resolve, reject);\n        };\n\n        request.open(options.method, url + (query ? '?' + toUrlParam(query) : ''));\n        setHeaders(request, options.headers);\n        request.send(options.body);\n    });\n}\n\nfunction resolveOrReject(request, options, resolve, reject) {\n    if (request.readyState === 4) {\n        if (request.status === 200) {\n            resolve(options.json ? JSON.parse(request.responseText) : request.responseText);\n        } else {\n            reject(request);\n        }\n    }\n}\n\nfunction setHeaders(request, headers) {\n    headers = headers || {};\n    extend(headers, {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json;charset=UTF-8',\n    });\n    for (var key in headers) {\n        if (headers.hasOwnProperty(key)) {\n            request.setRequestHeader(key, headers[key]);\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/request.js\n **/","export function extend() {\n    var result = arguments[0] || {};\n\n    for (var i = 1, l = arguments.length; i < l; i++) {\n        var obj = arguments[i];\n        for (var attrname in obj) {\n            result[attrname] = obj[attrname];\n        }\n    }\n\n    return result;\n}\n\nexport function toUrlParam(jsonParams) {\n    return Object.keys(jsonParams).map(function (k) {\n        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n    }).join('&');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/utils.js\n **/","import { extend } from './utils';\n\nvar baseUrl = '/api';\nvar defaultFetchOptions = {};\n\nfunction normalize(arg) {\n    if (!arg) {\n        return '';\n    }\n    if (arg instanceof Object) {\n        return extractId(arg);\n    }\n    return arg;\n}\n\nfunction hasId(object) {\n    return object.id;\n}\n\nfunction extractId(object) {\n    if (hasId(object)) {\n        return object.id;\n    }\n    throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n}\n\nexport default (request) => {\n\n    function yawpFn(baseArg) {\n\n        var options = {};\n        var q = {};\n\n        class Yawp {\n\n            constructor(props) {\n                extend(this, props);\n            }\n\n            // request\n\n            static clear() {\n                options = {\n                    url: normalize(baseArg)\n                };\n            }\n\n            static prepareRequestOptions() {\n                var _options = extend({}, options);\n                Yawp.clear();\n                return _options;\n            }\n\n            static baseRequest(type) {\n                var options = Yawp.prepareRequestOptions();\n\n                var url = baseUrl + options.url;\n                delete options.url;\n\n                options.method = type;\n                options.json = true;\n                extend(options, defaultFetchOptions);\n\n                //console.log('r', url, options);\n\n                return request(url, options);\n            }\n\n            // query\n\n            static from(parentBaseArg) {\n                var parentBase = normalize(parentBaseArg);\n                options.url = parentBase + options.url;\n                return this;\n            }\n\n            static transform(t) {\n                Yawp.param('t', t);\n                return this;\n            }\n\n            static where(data) {\n                if (arguments.length === 1) {\n                    q.where = data;\n                } else {\n                    q.where = [].slice.call(arguments);\n                }\n                return this;\n            }\n\n            static order(data) {\n                q.order = data;\n                return this;\n            }\n\n            static sort(data) {\n                q.sort = data;\n                return this;\n            }\n\n            static limit(data) {\n                q.limit = data;\n                return this;\n            }\n\n            static fetch(cb) {\n                var promise = Yawp.baseRequest('GET');\n                if (cb) {\n                    return promise.then(cb);\n                }\n                return promise;\n            }\n\n            static setupQuery() {\n                if (Object.keys(q).length > 0) {\n                    Yawp.param('q', JSON.stringify(q));\n                }\n            }\n            //\n            //static url(decode) {\n            //    Yawp.setupQuery();\n            //    var url = baseUrl + options.url + (options.query ? '?' + toUrlParam(options.query) : '');\n            //    return decode ? decodeURIComponent(url) : url;\n            //}\n\n            static list(cb) {\n                Yawp.setupQuery();\n                var promise = Yawp.baseRequest('GET');\n                if (cb) {\n                    return promise.then(cb);\n                }\n                return promise;\n            }\n\n            static first(cb) {\n                Yawp.limit(1);\n\n                return Yawp.list(function (objects) {\n                    var object = objects.length === 0 ? null : objects[0];\n                    return cb ? cb(object) : object;\n                });\n            }\n\n            static only(cb) {\n                return Yawp.list(function (objects) {\n                    if (objects.length !== 1) {\n                        throw 'called only but got ' + objects.length + ' results';\n                    }\n                    var object = objects[0];\n                    return cb ? cb(object) : object;\n                });\n            }\n\n            // repository\n\n            static create(object) {\n                options.body = JSON.stringify(object);\n                return Yawp.baseRequest('POST');\n            }\n\n            static update(object) {\n                options.body = JSON.stringify(object);\n                return Yawp.baseRequest('PUT');\n            }\n\n            static patch(object) {\n                options.body = JSON.stringify(object);\n                return Yawp.baseRequest('PATCH');\n            }\n\n            static destroy() {\n                return Yawp.baseRequest('DELETE');\n            }\n\n            // actions\n\n            static json(object) {\n                options.body = JSON.stringify(object);\n                return this;\n            }\n\n            static params(params) {\n                options.query = extend(options.query, params);\n                return this;\n            }\n\n            static param(key, value) {\n                if (!options.query) {\n                    options.query = {};\n                }\n                options.query[key] = value;\n            }\n\n            static action(verb, path) {\n                options.url += '/' + path;\n                return Yawp.baseRequest(verb);\n            }\n\n            static get(action) {\n                return Yawp.action('GET', action);\n            }\n\n            static put(action) {\n                return Yawp.action('PUT', action);\n            }\n\n            static _patch(action) {\n                return Yawp.action('PATCH', action);\n            }\n\n            static post(action) {\n                return Yawp.action('POST', action);\n            }\n\n            static _delete(action) {\n                return Yawp.action('DELETE', action);\n            }\n\n            // instance method\n\n            save(cb) {\n                var promise = this.createOrUpdate();\n                return cb ? promise.then(cb) : promise;\n            }\n\n            createOrUpdate() {\n                var promise;\n                if (hasId(this)) {\n                    options.url = this.id;\n                    promise = Yawp.update(this);\n                } else {\n                    promise = Yawp.create(this);\n                }\n                return promise;\n            }\n        }\n\n        Yawp.clear();\n        return Yawp;\n    }\n\n    // base api\n\n    function config(cb) {\n        var c = {\n            baseUrl: (url) => {\n                baseUrl = url;\n            },\n            defaultFetchOptions: (options) => {\n                defaultFetchOptions = options;\n            }\n        };\n        cb(c);\n    };\n\n    function update(object) {\n        var id = extractId(object);\n        return yawpFn(id).update(object);\n    }\n\n    function patch(object) {\n        var id = extractId(object);\n        return yawpFn(id).patch(object);\n    }\n\n    function destroy(object) {\n        var id = extractId(object);\n        return yawpFn(id).destroy(object);\n    }\n\n    let baseApi = {\n        config,\n        update,\n        patch,\n        destroy\n    }\n\n    return extend(yawpFn, baseApi);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/yawp2.js\n **/"],"sourceRoot":""}