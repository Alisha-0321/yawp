{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///yawp.min.js","webpack:///webpack/bootstrap cc2f086bd557bee52606","webpack:///./src/web/index.js","webpack:///./src/web/request.js","webpack:///./src/commons/utils.js","webpack:///./src/commons/yawp.js","webpack:///./src/commons/fixtures.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_request","_request2","yawp","fixtures","resolveOrReject","request","options","resolve","reject","readyState","status","json","JSON","parse","responseText","setHeaders","headers","_utils","extend","Accept","Content-Type","key","hasOwnProperty","setRequestHeader","url","query","Promise","XMLHttpRequest","onreadystatechange","open","method","toUrlParam","send","body","result","arguments","i","l","length","attrname","jsonParams","keys","map","k","encodeURIComponent","join","config","callback","baseUrl","_baseUrl","defaultFetchOptions","_defaultFetchOptions","baseRequest","type","data","extractId","object","where","q","slice","order","sort","limit","fetch","then","setupQuery","addQueryParameter","stringify","decode","decodeURIComponent","list","first","objects","only","repository","create","update","patch","destroy","actions","actionOptions","action","setJson","params","addQueryParameters","get","put","_patch","post","_delete","baseArg","normalize","arg","ajaxOptions","from","parentBaseArg","parentBase","transform","t","sync","async","api","_async","resetUrl","_resetUrl","lazyPropertyKeys","array","_lazyPropertyKeys","bind","endpointKey","endpoint","parentId","_bind","fixture","lazy","computeLazyApi","fn","bindFn","args","Array","prototype","unshift","apply","reset","cache","queue","prepareObject","lazyProperties","loadLazyProperties","promise","property","Function","push","save","console","error","hasLazy","saveFixtureToCache","loadFixtureFromCache","enqueue","undefined","isFixture","promiseFn","computeLazyPropertiesApi","apiKey","fixtureKey","addLazyPropertyApi","propertyKey","saveToCachePromise","lazyPropertiesApi","lazyMap","addLazyApi","lazyApi","load"],"mappings":"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","file":"yawp.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _request = __webpack_require__(1);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar yawp = __webpack_require__(3)(_request2.default);\n\tvar fixtures = __webpack_require__(4)(_request2.default);\n\t\n\tyawp.fixtures = fixtures;\n\t\n\texports.default = yawp;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (url, query, options) {\n\t    return new Promise(function (resolve, reject) {\n\t        var request = new XMLHttpRequest();\n\t\n\t        request.onreadystatechange = function () {\n\t            resolveOrReject(request, options, resolve, reject);\n\t        };\n\t\n\t        request.open(options.method, url + (query ? '?' + (0, _utils.toUrlParam)(query) : ''));\n\t        setHeaders(request, options.headers);\n\t        request.send(options.body);\n\t    });\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tfunction resolveOrReject(request, options, resolve, reject) {\n\t    if (request.readyState === 4) {\n\t        if (request.status === 200) {\n\t            resolve(options.json ? JSON.parse(request.responseText) : request.responseText);\n\t        } else {\n\t            reject(request);\n\t        }\n\t    }\n\t}\n\t\n\tfunction setHeaders(request, headers) {\n\t    headers = headers || {};\n\t    (0, _utils.extend)(headers, {\n\t        'Accept': 'application/json',\n\t        'Content-Type': 'application/json;charset=UTF-8'\n\t    });\n\t    for (var key in headers) {\n\t        if (headers.hasOwnProperty(key)) {\n\t            request.setRequestHeader(key, headers[key]);\n\t        }\n\t    }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.extend = extend;\n\texports.toUrlParam = toUrlParam;\n\tfunction extend() {\n\t    var result = arguments[0] || {};\n\t\n\t    for (var i = 1, l = arguments.length; i < l; i++) {\n\t        var obj = arguments[i];\n\t        for (var attrname in obj) {\n\t            result[attrname] = obj[attrname];\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction toUrlParam(jsonParams) {\n\t    return Object.keys(jsonParams).map(function (k) {\n\t        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n\t    }).join('&');\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (request) {\n\t\n\t    function config(callback) {\n\t        var c = {\n\t            baseUrl: function baseUrl(url) {\n\t                _baseUrl = url;\n\t            },\n\t            defaultFetchOptions: function defaultFetchOptions(options) {\n\t                _defaultFetchOptions = options;\n\t            }\n\t        };\n\t\n\t        callback(c);\n\t    }\n\t\n\t    function baseRequest(type, options) {\n\t        var url = _baseUrl + options.url;\n\t        var query = options.query;\n\t        var body = options.data;\n\t        delete options.url;\n\t        delete options.query;\n\t\n\t        options.method = type;\n\t        options.body = body;\n\t        options.json = true;\n\t        (0, _utils.extend)(options, _defaultFetchOptions);\n\t\n\t        return request(url, query, options);\n\t    }\n\t\n\t    function extractId(object) {\n\t        if (object.id) {\n\t            return object.id;\n\t        }\n\t        throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n\t    }\n\t\n\t    function query(options) {\n\t        var q = {};\n\t\n\t        function where(data) {\n\t            if (arguments.length === 1) {\n\t                q.where = data;\n\t            } else {\n\t                q.where = [].slice.call(arguments);\n\t            }\n\t            return this;\n\t        }\n\t\n\t        function order(data) {\n\t            q.order = data;\n\t            return this;\n\t        }\n\t\n\t        function sort(data) {\n\t            q.sort = data;\n\t            return this;\n\t        }\n\t\n\t        function limit(data) {\n\t            q.limit = data;\n\t            return this;\n\t        }\n\t\n\t        function fetch(callback) {\n\t            return baseRequest('GET', options()).then(callback);\n\t        }\n\t\n\t        function setupQuery() {\n\t            if (Object.keys(q).length > 0) {\n\t                options.addQueryParameter('q', JSON.stringify(q));\n\t            }\n\t        }\n\t\n\t        function url(decode) {\n\t            setupQuery();\n\t            var url = _baseUrl + options().url + (options().query ? '?' + toUrlParam(options().query) : '');\n\t            if (decode) {\n\t                return decodeURIComponent(url);\n\t            }\n\t            return url;\n\t        }\n\t\n\t        function list(callback) {\n\t            setupQuery();\n\t            return baseRequest('GET', options()).then(callback);\n\t        }\n\t\n\t        function first(callback) {\n\t            limit(1);\n\t\n\t            return list(function (objects) {\n\t                var object = objects.length === 0 ? null : objects[0];\n\t                if (callback) {\n\t                    callback(object);\n\t                }\n\t            });\n\t        }\n\t\n\t        function only(callback) {\n\t            return list(function (objects) {\n\t                if (objects.length !== 1) {\n\t                    throw 'called only but got ' + objects.length + ' results';\n\t                }\n\t                if (callback) {\n\t                    callback(objects[0]);\n\t                }\n\t            });\n\t        }\n\t\n\t        return {\n\t            where: where,\n\t            order: order,\n\t            sort: sort,\n\t            limit: limit,\n\t            fetch: fetch,\n\t            list: list,\n\t            first: first,\n\t            only: only,\n\t            url: url\n\t        };\n\t    }\n\t\n\t    function repository(options) {\n\t        function create(object) {\n\t            options().data = JSON.stringify(object);\n\t            return baseRequest('POST', options());\n\t        }\n\t\n\t        function update(object) {\n\t            options().data = JSON.stringify(object);\n\t            return baseRequest('PUT', options());\n\t        }\n\t\n\t        function patch(object) {\n\t            options().data = JSON.stringify(object);\n\t            return baseRequest('PATCH', options());\n\t        }\n\t\n\t        function destroy() {\n\t            return baseRequest('DELETE', options());\n\t        }\n\t\n\t        return {\n\t            create: create,\n\t            update: update,\n\t            patch: patch,\n\t            destroy: destroy\n\t        };\n\t    }\n\t\n\t    function actions(options) {\n\t        function actionOptions(action) {\n\t            options().url += '/' + action;\n\t            return options();\n\t        }\n\t\n\t        function json(object) {\n\t            options.setJson(object);\n\t            return this;\n\t        }\n\t\n\t        function params(params) {\n\t            options.addQueryParameters(params);\n\t            return this;\n\t        }\n\t\n\t        function get(action) {\n\t            return baseRequest('GET', actionOptions(action));\n\t        }\n\t\n\t        function put(action) {\n\t            return baseRequest('PUT', actionOptions(action));\n\t        }\n\t\n\t        function _patch(action) {\n\t            return baseRequest('PATCH', actionOptions(action));\n\t        }\n\t\n\t        function post(action) {\n\t            return baseRequest('POST', actionOptions(action));\n\t        }\n\t\n\t        function _delete(action) {\n\t            return baseRequest('DELETE', actionOptions(action));\n\t        }\n\t\n\t        return {\n\t            json: json,\n\t            params: params,\n\t            get: get,\n\t            put: put,\n\t            _patch: _patch,\n\t            post: post,\n\t            _delete: _delete\n\t        };\n\t    }\n\t\n\t    function yawp(baseArg) {\n\t        function normalize(arg) {\n\t            if (!arg) {\n\t                return '';\n\t            }\n\t            if (arg instanceof Object) {\n\t                return extractId(arg);\n\t            }\n\t            return arg;\n\t        }\n\t\n\t        var ajaxOptions = {\n\t            url: normalize(baseArg),\n\t            async: true\n\t        };\n\t\n\t        function options() {\n\t            return ajaxOptions;\n\t        }\n\t\n\t        options.setJson = function (object) {\n\t            ajaxOptions.data = JSON.stringify(object);\n\t        };\n\t\n\t        options.addQueryParameters = function (params) {\n\t            ajaxOptions.query = (0, _utils.extend)(ajaxOptions.query, params);\n\t        };\n\t\n\t        options.addQueryParameter = function (key, value) {\n\t            if (!ajaxOptions.query) {\n\t                ajaxOptions.query = {};\n\t            }\n\t            ajaxOptions.query[key] = value;\n\t        };\n\t\n\t        function from(parentBaseArg) {\n\t            var parentBase = normalize(parentBaseArg);\n\t            options().url = parentBase + options().url;\n\t            return this;\n\t        }\n\t\n\t        function transform(t) {\n\t            options.addQueryParameter('t', t);\n\t            return this;\n\t        }\n\t\n\t        function sync() {\n\t            ajaxOptions.async = false;\n\t            return this;\n\t        }\n\t\n\t        return (0, _utils.extend)({\n\t            from: from,\n\t            transform: transform,\n\t            sync: sync\n\t        }, query(options), repository(options), actions(options));\n\t    }\n\t\n\t    function update(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).update(object);\n\t    }\n\t\n\t    function patch(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).patch(object);\n\t    }\n\t\n\t    function destroy(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).destroy(object);\n\t    }\n\t\n\t    var api = {\n\t        config: config,\n\t        update: update,\n\t        patch: patch,\n\t        destroy: destroy\n\t    };\n\t\n\t    return (0, _utils.extend)(yawp, api);\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar _baseUrl = '/api';\n\tvar _defaultFetchOptions = {};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (request) {\n\t\n\t    // config\n\t\n\t    function config(callback) {\n\t        var c = {\n\t            async: function async(value) {\n\t                _async = value;\n\t            },\n\t            baseUrl: function baseUrl(url) {\n\t                _baseUrl = url;\n\t            },\n\t            resetUrl: function resetUrl(url) {\n\t                _resetUrl = url;\n\t            },\n\t            lazyPropertyKeys: function lazyPropertyKeys(array) {\n\t                _lazyPropertyKeys = array;\n\t            },\n\t            bind: function bind(endpointKey, endpoint, parentId) {\n\t                api[endpointKey] = _bind(fixture, endpointKey, endpoint, parentId);\n\t            }\n\t        };\n\t\n\t        callback(c);\n\t\n\t        api.lazy = computeLazyApi();\n\t    }\n\t\n\t    // lib\n\t\n\t    var lazy = {};\n\t    var lazyProperties = {};\n\t\n\t    var cache = {};\n\t    var queue = [];\n\t\n\t    function _bind(fn, endpointKey, endpoint, parentId) {\n\t        var bindFn = function bindFn() {\n\t            var args = Array.prototype.slice.call(arguments, 0);\n\t            args.unshift(parentId);\n\t            args.unshift(endpoint);\n\t            args.unshift(endpointKey);\n\t            return fn.apply(this, args);\n\t        };\n\t        bindFn.endpoint = endpoint;\n\t        return bindFn;\n\t    }\n\t\n\t    function reset() {\n\t        return request(_resetUrl, null, {\n\t            method: 'GET',\n\t            async: _async\n\t        }).then(function () {\n\t            cache = {};\n\t            queue = [];\n\t        });\n\t    }\n\t\n\t    function prepareDataJSON(data) {\n\t        var newData = {};\n\t        (0, _utils.extend)(newData, data);\n\t        parseFunctions(newData);\n\t        return JSON.stringify(newData);\n\t    }\n\t\n\t    function parseFunctions(object) {\n\t        var i;\n\t        for (i in object) {\n\t            if (!object.hasOwnProperty(i)) {\n\t                continue;\n\t            }\n\t\n\t            var property = object[i];\n\t\n\t            if (property instanceof Function) {\n\t                object[i] = property();\n\t                continue;\n\t            }\n\t\n\t            if (property instanceof Object) {\n\t                parseFunctions(property);\n\t                continue;\n\t            }\n\t        }\n\t    }\n\t\n\t    function prepareObject(data) {\n\t        var object = {};\n\t        (0, _utils.extend)(object, data);\n\t        return new Promise(function (resolve) {\n\t            var lazyProperties = [];\n\t            loadLazyProperties(lazyProperties, object);\n\t\n\t            if (!lazyProperties.length) {\n\t                resolve(object);\n\t            }\n\t\n\t            var promise = lazyProperties[0]();\n\t            for (var i = 1, l = lazyProperties.length; i < l; i++) {\n\t                promise = promise.then(lazyProperties[i]);\n\t            }\n\t\n\t            promise.then(function () {\n\t                resolve(object);\n\t            });\n\t        });\n\t    }\n\t\n\t    function loadLazyProperties(lazyProperties, object) {\n\t        var i;\n\t        for (i in object) {\n\t            if (!object.hasOwnProperty(i)) {\n\t                continue;\n\t            }\n\t\n\t            var property = object[i];\n\t\n\t            if (property instanceof Function) {\n\t                lazyProperties.push(function () {\n\t                    return property().then(function (value) {\n\t                        object[i] = value;\n\t                    });\n\t                });\n\t                continue;\n\t            }\n\t\n\t            if (property instanceof Object) {\n\t                loadLazyProperties(lazyProperties, property);\n\t                continue;\n\t            }\n\t        }\n\t    }\n\t\n\t    function save(endpoint, parentId, data) {\n\t        if (!endpoint) {\n\t            console.error('not endpoint?!');\n\t        }\n\t\n\t        return prepareObject(data).then(function (object) {\n\t            var url = _baseUrl + (parentId ? object[parentId] : '') + endpoint;\n\t            return request(url, null, {\n\t                method: 'POST',\n\t                json: true,\n\t                body: JSON.stringify(object)\n\t            });\n\t        });\n\t    }\n\t\n\t    function hasLazy(endpoint, key) {\n\t        if (!lazy[endpoint]) {\n\t            return false;\n\t        }\n\t        if (!lazy[endpoint][key]) {\n\t            return false;\n\t        }\n\t        return true;\n\t    }\n\t\n\t    function saveFixtureToCache(endpointKey, endpoint, parentId, data, key) {\n\t        var result = save(endpoint, parentId, data);\n\t        result.then(function (object) {\n\t            cache[endpointKey][key] = object;\n\t        });\n\t        return result;\n\t    }\n\t\n\t    function loadFixtureFromCache(endpointKey, key) {\n\t        if (!cache[endpointKey]) {\n\t            cache[endpointKey] = {};\n\t            return null;\n\t        }\n\t        return cache[endpointKey][key];\n\t    }\n\t\n\t    function fixture(endpointKey, endpoint, parentId, key, data) {\n\t        var enqueue = arguments.length <= 5 || arguments[5] === undefined ? true : arguments[5];\n\t\n\t        var object = loadFixtureFromCache(endpointKey, key);\n\t        if (object) {\n\t            return function () {\n\t                return new Promise(function (resolve) {\n\t                    resolve(object);\n\t                });\n\t            };\n\t        }\n\t\n\t        var isFixture = !data;\n\t\n\t        if (isFixture) {\n\t            if (hasLazy(endpoint, key)) {\n\t                data = lazy[endpoint][key];\n\t            } else {\n\t                throw 'cannot resolve lazy fixture: ' + endpointKey + ' -> ' + key;\n\t            }\n\t        }\n\t\n\t        var promiseFn = function promiseFn() {\n\t            return saveFixtureToCache(endpointKey, endpoint, parentId, data, key);\n\t        };\n\t\n\t        if (enqueue) {\n\t            queue.push(promiseFn);\n\t        }\n\t        return promiseFn;\n\t    }\n\t\n\t    function map(objects) {\n\t        var result = {};\n\t\n\t        for (var i in objects) {\n\t            var object = objects[i];\n\t\n\t            var key = object.key;\n\t            var value = object.value;\n\t\n\t            if (key instanceof Function) {\n\t                key = key();\n\t            }\n\t\n\t            result[key] = value;\n\t        }\n\t        return result;\n\t    }\n\t\n\t    function computeLazyPropertiesApi(apiKey, fixtureKey) {\n\t        var i,\n\t            lazyPropertiesApi = {};\n\t\n\t        function addLazyPropertyApi(propertyKey) {\n\t            return function () {\n\t                var saveToCachePromise = api[apiKey](fixtureKey, null, false)();\n\t                return saveToCachePromise.then(function () {\n\t                    return cache[apiKey][fixtureKey][propertyKey];\n\t                });\n\t            };\n\t        }\n\t\n\t        for (i = 0; i < _lazyPropertyKeys.length; i++) {\n\t            var propertyKey = _lazyPropertyKeys[i];\n\t            lazyPropertiesApi[propertyKey] = addLazyPropertyApi(propertyKey);\n\t        }\n\t\n\t        return lazyPropertiesApi;\n\t    }\n\t\n\t    function lazyMap(objects) {\n\t        return function () {\n\t            return map(objects);\n\t        };\n\t    }\n\t\n\t    function computeLazyApi() {\n\t        var lazyApi = {};\n\t\n\t        function addLazyApi(apiKey, endpoint) {\n\t            return function (fixtureKey, data) {\n\t                if (!lazy[endpoint]) {\n\t                    lazy[endpoint] = {};\n\t                    lazyProperties[endpoint] = {};\n\t                } else if (lazy[endpoint][fixtureKey]) {\n\t                    // lazy fixture already configured, someone is refering a\n\t                    // lazy property.\n\t                    return lazyProperties[endpoint][fixtureKey];\n\t                }\n\t\n\t                lazy[endpoint][fixtureKey] = data;\n\t                lazyProperties[endpoint][fixtureKey] = computeLazyPropertiesApi(apiKey, fixtureKey);\n\t            };\n\t        }\n\t\n\t        for (var apiKey in api) {\n\t            var endpoint = api[apiKey].endpoint;\n\t            lazyApi[apiKey] = addLazyApi(apiKey, endpoint);\n\t        }\n\t\n\t        lazyApi.map = lazyMap;\n\t        return lazyApi;\n\t    }\n\t\n\t    function load(callback) {\n\t        if (!queue.length) {\n\t            callback(cache);\n\t            return;\n\t        }\n\t\n\t        var promise = queue[0]();\n\t        for (var i = 1, l = queue.length; i < l; i++) {\n\t            promise = promise.then(queue[i]);\n\t        }\n\t\n\t        promise.then(function () {\n\t            queue = [];\n\t            callback(cache);\n\t        });\n\t    }\n\t\n\t    api.lazy = computeLazyApi();\n\t    api.load = load;\n\t    api.reset = reset;\n\t    api.map = map;\n\t    api.config = config;\n\t\n\t    return api;\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar _baseUrl = '/fixtures';\n\tvar _resetUrl = '/_ah/yawp/datastore/delete_all';\n\tvar _lazyPropertyKeys = ['id']; // needed till harmony proxies\n\tvar _async = true;\n\t\n\tvar api = {};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** yawp.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cc2f086bd557bee52606\n **/","import request from './request';\n\nvar yawp = require('./../commons/yawp')(request);\nvar fixtures = require('./../commons/fixtures')(request);\n\nyawp.fixtures = fixtures;\n\nexport default yawp;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/index.js\n **/","import { extend, toUrlParam } from '../commons/utils';\n\nexport default function (url, query, options) {\n    return new Promise((resolve, reject) => {\n        var request = new XMLHttpRequest();\n\n        request.onreadystatechange = function () {\n            resolveOrReject(request, options, resolve, reject);\n        };\n\n        request.open(options.method, url + (query ? '?' + toUrlParam(query) : ''));\n        setHeaders(request, options.headers);\n        request.send(options.body);\n    });\n}\n\nfunction resolveOrReject(request, options, resolve, reject) {\n    if (request.readyState === 4) {\n        if (request.status === 200) {\n            resolve(options.json ? JSON.parse(request.responseText) : request.responseText);\n        } else {\n            reject(request);\n        }\n    }\n}\n\nfunction setHeaders(request, headers) {\n    headers = headers || {};\n    extend(headers, {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json;charset=UTF-8',\n    });\n    for (var key in headers) {\n        if (headers.hasOwnProperty(key)) {\n            request.setRequestHeader(key, headers[key]);\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/request.js\n **/","export function extend() {\n    var result = arguments[0] || {};\n\n    for (var i = 1, l = arguments.length; i < l; i++) {\n        var obj = arguments[i];\n        for (var attrname in obj) {\n            result[attrname] = obj[attrname];\n        }\n    }\n\n    return result;\n}\n\nexport function toUrlParam(jsonParams) {\n    return Object.keys(jsonParams).map(function (k) {\n        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n    }).join('&');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/utils.js\n **/","import { extend } from './utils';\n\nvar baseUrl = '/api';\nvar defaultFetchOptions = {};\n\nexport default function (request) {\n\n    function config(callback) {\n        var c = {\n            baseUrl: function (url) {\n                baseUrl = url;\n            },\n            defaultFetchOptions: function (options) {\n                defaultFetchOptions = options;\n            }\n        };\n\n        callback(c);\n    }\n\n    function baseRequest(type, options) {\n        var url = baseUrl + options.url;\n        var query = options.query;\n        var body = options.data;\n        delete options.url;\n        delete options.query;\n\n        options.method = type;\n        options.body = body;\n        options.json = true;\n        extend(options, defaultFetchOptions);\n\n        return request(url, query, options);\n    }\n\n    function extractId(object) {\n        if (object.id) {\n            return object.id;\n        }\n        throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n    }\n\n    function query(options) {\n        var q = {};\n\n        function where(data) {\n            if (arguments.length === 1) {\n                q.where = data;\n            } else {\n                q.where = [].slice.call(arguments);\n            }\n            return this;\n        }\n\n        function order(data) {\n            q.order = data;\n            return this;\n        }\n\n        function sort(data) {\n            q.sort = data;\n            return this;\n        }\n\n        function limit(data) {\n            q.limit = data;\n            return this;\n        }\n\n        function fetch(callback) {\n            return baseRequest('GET', options()).then(callback);\n        }\n\n        function setupQuery() {\n            if (Object.keys(q).length > 0) {\n                options.addQueryParameter('q', JSON.stringify(q));\n            }\n        }\n\n        function url(decode) {\n            setupQuery();\n            var url = baseUrl + options().url + (options().query ? '?' + toUrlParam(options().query) : '');\n            if (decode) {\n                return decodeURIComponent(url);\n            }\n            return url;\n        }\n\n        function list(callback) {\n            setupQuery();\n            return baseRequest('GET', options()).then(callback);\n        }\n\n        function first(callback) {\n            limit(1);\n\n            return list(function (objects) {\n                var object = objects.length === 0 ? null : objects[0];\n                if (callback) {\n                    callback(object);\n                }\n            });\n        }\n\n        function only(callback) {\n            return list(function (objects) {\n                if (objects.length !== 1) {\n                    throw 'called only but got ' + objects.length + ' results';\n                }\n                if (callback) {\n                    callback(objects[0]);\n                }\n            });\n        }\n\n        return {\n            where: where,\n            order: order,\n            sort: sort,\n            limit: limit,\n            fetch: fetch,\n            list: list,\n            first: first,\n            only: only,\n            url: url\n        };\n    }\n\n    function repository(options) {\n        function create(object) {\n            options().data = JSON.stringify(object);\n            return baseRequest('POST', options());\n        }\n\n        function update(object) {\n            options().data = JSON.stringify(object);\n            return baseRequest('PUT', options());\n        }\n\n        function patch(object) {\n            options().data = JSON.stringify(object);\n            return baseRequest('PATCH', options());\n        }\n\n        function destroy() {\n            return baseRequest('DELETE', options());\n        }\n\n        return {\n            create: create,\n            update: update,\n            patch: patch,\n            destroy: destroy\n        };\n    }\n\n    function actions(options) {\n        function actionOptions(action) {\n            options().url += '/' + action;\n            return options();\n        }\n\n        function json(object) {\n            options.setJson(object);\n            return this;\n        }\n\n        function params(params) {\n            options.addQueryParameters(params);\n            return this;\n        }\n\n        function get(action) {\n            return baseRequest('GET', actionOptions(action));\n        }\n\n        function put(action) {\n            return baseRequest('PUT', actionOptions(action));\n        }\n\n        function _patch(action) {\n            return baseRequest('PATCH', actionOptions(action));\n        }\n\n        function post(action) {\n            return baseRequest('POST', actionOptions(action));\n        }\n\n        function _delete(action) {\n            return baseRequest('DELETE', actionOptions(action));\n        }\n\n        return {\n            json: json,\n            params: params,\n            get: get,\n            put: put,\n            _patch: _patch,\n            post: post,\n            _delete: _delete\n        };\n    }\n\n    function yawp(baseArg) {\n        function normalize(arg) {\n            if (!arg) {\n                return '';\n            }\n            if (arg instanceof Object) {\n                return extractId(arg);\n            }\n            return arg;\n        }\n\n        var ajaxOptions = {\n            url: normalize(baseArg),\n            async: true\n        };\n\n        function options() {\n            return ajaxOptions;\n        }\n\n        options.setJson = function (object) {\n            ajaxOptions.data = JSON.stringify(object);\n        };\n\n        options.addQueryParameters = function (params) {\n            ajaxOptions.query = extend(ajaxOptions.query, params);\n        };\n\n        options.addQueryParameter = function (key, value) {\n            if (!ajaxOptions.query) {\n                ajaxOptions.query = {};\n            }\n            ajaxOptions.query[key] = value;\n        };\n\n        function from(parentBaseArg) {\n            var parentBase = normalize(parentBaseArg);\n            options().url = parentBase + options().url;\n            return this;\n        }\n\n        function transform(t) {\n            options.addQueryParameter('t', t);\n            return this;\n        }\n\n        function sync() {\n            ajaxOptions.async = false;\n            return this;\n        }\n\n        return extend({\n            from: from,\n            transform: transform,\n            sync: sync\n        }, query(options), repository(options), actions(options));\n    }\n\n    function update(object) {\n        var id = extractId(object);\n        return yawp(id).update(object);\n    }\n\n    function patch(object) {\n        var id = extractId(object);\n        return yawp(id).patch(object);\n    }\n\n    function destroy(object) {\n        var id = extractId(object);\n        return yawp(id).destroy(object);\n    }\n\n    var api = {\n        config: config,\n        update: update,\n        patch: patch,\n        destroy: destroy\n    };\n\n    return extend(yawp, api);\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/yawp.js\n **/","import { extend } from './utils';\n\nvar baseUrl = '/fixtures';\nvar resetUrl = '/_ah/yawp/datastore/delete_all';\nvar lazyPropertyKeys = ['id']; // needed till harmony proxies\nvar async = true;\n\nvar api = {};\n\nexport default function (request) {\n\n    // config\n\n    function config(callback) {\n        var c = {\n            async: function (value) {\n                async = value;\n            },\n            baseUrl: function (url) {\n                baseUrl = url;\n            },\n            resetUrl: function (url) {\n                resetUrl = url;\n            },\n            lazyPropertyKeys: function (array) {\n                lazyPropertyKeys = array;\n            },\n            bind: function (endpointKey, endpoint, parentId) {\n                api[endpointKey] = bind(fixture, endpointKey, endpoint, parentId);\n            }\n        };\n\n        callback(c);\n\n        api.lazy = computeLazyApi();\n    }\n\n    // lib\n\n    var lazy = {};\n    var lazyProperties = {};\n\n    var cache = {};\n    var queue = [];\n\n    function bind(fn, endpointKey, endpoint, parentId) {\n        var bindFn = function () {\n            var args = Array.prototype.slice.call(arguments, 0);\n            args.unshift(parentId);\n            args.unshift(endpoint);\n            args.unshift(endpointKey);\n            return fn.apply(this, args);\n        };\n        bindFn.endpoint = endpoint;\n        return bindFn;\n    }\n\n    function reset() {\n        return request(resetUrl, null, {\n            method: 'GET',\n            async: async\n        }).then(() => {\n            cache = {};\n            queue = [];\n        });\n    }\n\n    function prepareDataJSON(data) {\n        var newData = {};\n        extend(newData, data);\n        parseFunctions(newData);\n        return JSON.stringify(newData);\n    }\n\n    function parseFunctions(object) {\n        var i;\n        for (i in object) {\n            if (!object.hasOwnProperty(i)) {\n                continue;\n            }\n\n            var property = object[i];\n\n            if (property instanceof Function) {\n                object[i] = property();\n                continue;\n            }\n\n            if (property instanceof Object) {\n                parseFunctions(property);\n                continue;\n            }\n        }\n    }\n\n    function prepareObject(data) {\n        var object = {};\n        extend(object, data);\n        return new Promise((resolve) => {\n            var lazyProperties = [];\n            loadLazyProperties(lazyProperties, object);\n\n            if (!lazyProperties.length) {\n                resolve(object);\n            }\n\n            var promise = lazyProperties[0]();\n            for (var i = 1, l = lazyProperties.length; i < l; i++) {\n                promise = promise.then(lazyProperties[i]);\n            }\n\n            promise.then(() => {\n                resolve(object);\n            });\n        });\n    }\n\n    function loadLazyProperties(lazyProperties, object) {\n        var i;\n        for (i in object) {\n            if (!object.hasOwnProperty(i)) {\n                continue;\n            }\n\n            var property = object[i];\n\n            if (property instanceof Function) {\n                lazyProperties.push(() => {\n                    return property().then((value) => {\n                        object[i] = value;\n                    });\n                });\n                continue;\n            }\n\n            if (property instanceof Object) {\n                loadLazyProperties(lazyProperties, property);\n                continue;\n            }\n        }\n    }\n\n    function save(endpoint, parentId, data) {\n        if (!endpoint) {\n            console.error('not endpoint?!');\n        }\n\n        return prepareObject(data).then((object) => {\n            var url = baseUrl + (parentId ? object[parentId] : '') + endpoint;\n            return request(url, null, {\n                method: 'POST',\n                json: true,\n                body: JSON.stringify(object)\n            });\n        });\n    }\n\n    function hasLazy(endpoint, key) {\n        if (!lazy[endpoint]) {\n            return false;\n        }\n        if (!lazy[endpoint][key]) {\n            return false;\n        }\n        return true;\n    }\n\n    function saveFixtureToCache(endpointKey, endpoint, parentId, data, key) {\n        var result = save(endpoint, parentId, data);\n        result.then((object) => {\n            cache[endpointKey][key] = object;\n        });\n        return result;\n    }\n\n    function loadFixtureFromCache(endpointKey, key) {\n        if (!cache[endpointKey]) {\n            cache[endpointKey] = {};\n            return null;\n        }\n        return cache[endpointKey][key];\n    }\n\n    function fixture(endpointKey, endpoint, parentId, key, data, enqueue = true) {\n        let object = loadFixtureFromCache(endpointKey, key);\n        if (object) {\n            return () => {\n                return new Promise((resolve) => {\n                    resolve(object);\n                });\n            }\n        }\n\n        var isFixture = !data;\n\n        if (isFixture) {\n            if (hasLazy(endpoint, key)) {\n                data = lazy[endpoint][key];\n            } else {\n                throw 'cannot resolve lazy fixture: ' + endpointKey + ' -> ' + key;\n            }\n        }\n\n        var promiseFn = () => {\n            return saveFixtureToCache(endpointKey, endpoint, parentId, data, key);\n        };\n\n        if (enqueue) {\n            queue.push(promiseFn);\n        }\n        return promiseFn;\n    }\n\n    function map(objects) {\n        var result = {};\n\n        for (var i in objects) {\n            var object = objects[i];\n\n            var key = object.key;\n            var value = object.value;\n\n            if (key instanceof Function) {\n                key = key();\n            }\n\n            result[key] = value;\n        }\n        return result;\n    }\n\n    function computeLazyPropertiesApi(apiKey, fixtureKey) {\n        var i, lazyPropertiesApi = {};\n\n        function addLazyPropertyApi(propertyKey) {\n            return function () {\n                var saveToCachePromise = api[apiKey](fixtureKey, null, false)();\n                return saveToCachePromise.then(() => {\n                    return cache[apiKey][fixtureKey][propertyKey]\n                });\n            };\n        }\n\n        for (i = 0; i < lazyPropertyKeys.length; i++) {\n            var propertyKey = lazyPropertyKeys[i];\n            lazyPropertiesApi[propertyKey] = addLazyPropertyApi(propertyKey);\n        }\n\n        return lazyPropertiesApi;\n    }\n\n    function lazyMap(objects) {\n        return function () {\n            return map(objects);\n        };\n    }\n\n    function computeLazyApi() {\n        var lazyApi = {};\n\n        function addLazyApi(apiKey, endpoint) {\n            return function (fixtureKey, data) {\n                if (!lazy[endpoint]) {\n                    lazy[endpoint] = {};\n                    lazyProperties[endpoint] = {};\n                } else if (lazy[endpoint][fixtureKey]) {\n                    // lazy fixture already configured, someone is refering a\n                    // lazy property.\n                    return lazyProperties[endpoint][fixtureKey];\n                }\n\n                lazy[endpoint][fixtureKey] = data;\n                lazyProperties[endpoint][fixtureKey] = computeLazyPropertiesApi(apiKey, fixtureKey);\n            };\n        }\n\n        for (var apiKey in api) {\n            var endpoint = api[apiKey].endpoint;\n            lazyApi[apiKey] = addLazyApi(apiKey, endpoint);\n        }\n\n        lazyApi.map = lazyMap;\n        return lazyApi;\n    }\n\n    function load(callback) {\n        if (!queue.length) {\n            callback(cache);\n            return;\n        }\n\n        var promise = queue[0]();\n        for (var i = 1, l = queue.length; i < l; i++) {\n            promise = promise.then(queue[i]);\n        }\n\n        promise.then(() => {\n            queue = [];\n            callback(cache);\n        });\n    }\n\n    api.lazy = computeLazyApi();\n    api.load = load;\n    api.reset = reset;\n    api.map = map;\n    api.config = config;\n\n    return api;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/fixtures.js\n **/"],"sourceRoot":""}