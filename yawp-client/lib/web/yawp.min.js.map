{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///yawp.min.js","webpack:///webpack/bootstrap 91f1a20bbaf4af4efc77","webpack:///./src/web/index.js","webpack:///./src/web/request.js","webpack:///./src/commons/utils.js","webpack:///./src/commons/yawp.js","webpack:///./src/commons/fixtures.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_request","_request2","yawp","fixtures","resolveOrReject","request","options","resolve","reject","readyState","status","json","JSON","parse","responseText","setHeaders","headers","_utils","extend","Accept","Content-Type","key","hasOwnProperty","setRequestHeader","url","Promise","query","XMLHttpRequest","onreadystatechange","open","method","toUrlParam","send","body","result","arguments","i","l","length","attrname","jsonParams","keys","map","k","encodeURIComponent","join","config","callback","baseUrl","_baseUrl","defaultFetchOptions","_defaultFetchOptions","baseRequest","type","data","extractId","object","where","q","slice","order","sort","limit","fetch","then","setupQuery","addQueryParameter","stringify","decode","decodeURIComponent","list","first","objects","only","repository","create","update","patch","destroy","actions","actionOptions","action","setJson","params","addQueryParameters","get","put","_patch","post","_delete","baseArg","normalize","arg","ajaxOptions","from","parentBaseArg","parentBase","transform","t","sync","async","api","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","constructor","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","DEFAULT_BASE_URL","DEFAULT_RESET_URL","DEFAULT_LAZY_PROPERTIES","Fixtures","_resetUrl","_lazyProperties","promise","lazy","properties","all","_this","clear","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","next","done","_step$value","name","path","bindFixture","bindLazy","err","push","Fixture","Lazy","promiseFn","fx","createApi","_this2","chain","load","self","createStubs","createLoadPromiseFn","_this3","getLazyDataFor","isLoaded","prepare","response","getData","_this4","lazyProperties","inspectLazyProperties","resolveLazyProperties","_this5","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop","Function","actualValue","v","_iterator2","_ret","hasStubs","reduce","property","__stub__","_this6","createLazyStubs","_this7","getFixtureRef"],"mappings":"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","file":"yawp.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _request = __webpack_require__(1);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar yawp = __webpack_require__(3)(_request2.default);\n\tvar fixtures = __webpack_require__(4)(_request2.default);\n\t\n\tyawp.fixtures = fixtures;\n\t\n\texports.default = yawp;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (url, options) {\n\t    return new Promise(function (resolve, reject) {\n\t        var query = options.query;\n\t        delete options.query;\n\t\n\t        var request = new XMLHttpRequest();\n\t\n\t        request.onreadystatechange = function () {\n\t            resolveOrReject(request, options, resolve, reject);\n\t        };\n\t\n\t        request.open(options.method, url + (query ? '?' + (0, _utils.toUrlParam)(query) : ''));\n\t        setHeaders(request, options.headers);\n\t        request.send(options.body);\n\t    });\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tfunction resolveOrReject(request, options, resolve, reject) {\n\t    if (request.readyState === 4) {\n\t        if (request.status === 200) {\n\t            resolve(options.json ? JSON.parse(request.responseText) : request.responseText);\n\t        } else {\n\t            reject(request);\n\t        }\n\t    }\n\t}\n\t\n\tfunction setHeaders(request, headers) {\n\t    headers = headers || {};\n\t    (0, _utils.extend)(headers, {\n\t        'Accept': 'application/json',\n\t        'Content-Type': 'application/json;charset=UTF-8'\n\t    });\n\t    for (var key in headers) {\n\t        if (headers.hasOwnProperty(key)) {\n\t            request.setRequestHeader(key, headers[key]);\n\t        }\n\t    }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.extend = extend;\n\texports.toUrlParam = toUrlParam;\n\tfunction extend() {\n\t    var result = arguments[0] || {};\n\t\n\t    for (var i = 1, l = arguments.length; i < l; i++) {\n\t        var obj = arguments[i];\n\t        for (var attrname in obj) {\n\t            result[attrname] = obj[attrname];\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction toUrlParam(jsonParams) {\n\t    return Object.keys(jsonParams).map(function (k) {\n\t        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n\t    }).join('&');\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (request) {\n\t\n\t    function config(callback) {\n\t        var c = {\n\t            baseUrl: function baseUrl(url) {\n\t                _baseUrl = url;\n\t            },\n\t            defaultFetchOptions: function defaultFetchOptions(options) {\n\t                _defaultFetchOptions = options;\n\t            }\n\t        };\n\t\n\t        callback(c);\n\t    }\n\t\n\t    function baseRequest(type, options) {\n\t        var url = _baseUrl + options.url;\n\t        var body = options.data;\n\t        delete options.url;\n\t\n\t        options.method = type;\n\t        options.body = body;\n\t        options.json = true;\n\t        (0, _utils.extend)(options, _defaultFetchOptions);\n\t\n\t        return request(url, options);\n\t    }\n\t\n\t    function extractId(object) {\n\t        if (object.id) {\n\t            return object.id;\n\t        }\n\t        throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n\t    }\n\t\n\t    function query(options) {\n\t        var q = {};\n\t\n\t        function where(data) {\n\t            if (arguments.length === 1) {\n\t                q.where = data;\n\t            } else {\n\t                q.where = [].slice.call(arguments);\n\t            }\n\t            return this;\n\t        }\n\t\n\t        function order(data) {\n\t            q.order = data;\n\t            return this;\n\t        }\n\t\n\t        function sort(data) {\n\t            q.sort = data;\n\t            return this;\n\t        }\n\t\n\t        function limit(data) {\n\t            q.limit = data;\n\t            return this;\n\t        }\n\t\n\t        function fetch(callback) {\n\t            return baseRequest('GET', options()).then(callback);\n\t        }\n\t\n\t        function setupQuery() {\n\t            if (Object.keys(q).length > 0) {\n\t                options.addQueryParameter('q', JSON.stringify(q));\n\t            }\n\t        }\n\t\n\t        function url(decode) {\n\t            setupQuery();\n\t            var url = _baseUrl + options().url + (options().query ? '?' + toUrlParam(options().query) : '');\n\t            if (decode) {\n\t                return decodeURIComponent(url);\n\t            }\n\t            return url;\n\t        }\n\t\n\t        function list(callback) {\n\t            setupQuery();\n\t            return baseRequest('GET', options()).then(callback);\n\t        }\n\t\n\t        function first(callback) {\n\t            limit(1);\n\t\n\t            return list(function (objects) {\n\t                var object = objects.length === 0 ? null : objects[0];\n\t                if (callback) {\n\t                    callback(object);\n\t                }\n\t            });\n\t        }\n\t\n\t        function only(callback) {\n\t            return list(function (objects) {\n\t                if (objects.length !== 1) {\n\t                    throw 'called only but got ' + objects.length + ' results';\n\t                }\n\t                if (callback) {\n\t                    callback(objects[0]);\n\t                }\n\t            });\n\t        }\n\t\n\t        return {\n\t            where: where,\n\t            order: order,\n\t            sort: sort,\n\t            limit: limit,\n\t            fetch: fetch,\n\t            list: list,\n\t            first: first,\n\t            only: only,\n\t            url: url\n\t        };\n\t    }\n\t\n\t    function repository(options) {\n\t        function create(object) {\n\t            options().data = JSON.stringify(object);\n\t            return baseRequest('POST', options());\n\t        }\n\t\n\t        function update(object) {\n\t            options().data = JSON.stringify(object);\n\t            return baseRequest('PUT', options());\n\t        }\n\t\n\t        function patch(object) {\n\t            options().data = JSON.stringify(object);\n\t            return baseRequest('PATCH', options());\n\t        }\n\t\n\t        function destroy() {\n\t            return baseRequest('DELETE', options());\n\t        }\n\t\n\t        return {\n\t            create: create,\n\t            update: update,\n\t            patch: patch,\n\t            destroy: destroy\n\t        };\n\t    }\n\t\n\t    function actions(options) {\n\t        function actionOptions(action) {\n\t            options().url += '/' + action;\n\t            return options();\n\t        }\n\t\n\t        function json(object) {\n\t            options.setJson(object);\n\t            return this;\n\t        }\n\t\n\t        function params(params) {\n\t            options.addQueryParameters(params);\n\t            return this;\n\t        }\n\t\n\t        function get(action) {\n\t            return baseRequest('GET', actionOptions(action));\n\t        }\n\t\n\t        function put(action) {\n\t            return baseRequest('PUT', actionOptions(action));\n\t        }\n\t\n\t        function _patch(action) {\n\t            return baseRequest('PATCH', actionOptions(action));\n\t        }\n\t\n\t        function post(action) {\n\t            return baseRequest('POST', actionOptions(action));\n\t        }\n\t\n\t        function _delete(action) {\n\t            return baseRequest('DELETE', actionOptions(action));\n\t        }\n\t\n\t        return {\n\t            json: json,\n\t            params: params,\n\t            get: get,\n\t            put: put,\n\t            _patch: _patch,\n\t            post: post,\n\t            _delete: _delete\n\t        };\n\t    }\n\t\n\t    function yawp(baseArg) {\n\t        function normalize(arg) {\n\t            if (!arg) {\n\t                return '';\n\t            }\n\t            if (arg instanceof Object) {\n\t                return extractId(arg);\n\t            }\n\t            return arg;\n\t        }\n\t\n\t        var ajaxOptions = {\n\t            url: normalize(baseArg),\n\t            async: true\n\t        };\n\t\n\t        function options() {\n\t            return ajaxOptions;\n\t        }\n\t\n\t        options.setJson = function (object) {\n\t            ajaxOptions.data = JSON.stringify(object);\n\t        };\n\t\n\t        options.addQueryParameters = function (params) {\n\t            ajaxOptions.query = (0, _utils.extend)(ajaxOptions.query, params);\n\t        };\n\t\n\t        options.addQueryParameter = function (key, value) {\n\t            if (!ajaxOptions.query) {\n\t                ajaxOptions.query = {};\n\t            }\n\t            ajaxOptions.query[key] = value;\n\t        };\n\t\n\t        function from(parentBaseArg) {\n\t            var parentBase = normalize(parentBaseArg);\n\t            options().url = parentBase + options().url;\n\t            return this;\n\t        }\n\t\n\t        function transform(t) {\n\t            options.addQueryParameter('t', t);\n\t            return this;\n\t        }\n\t\n\t        function sync() {\n\t            ajaxOptions.async = false;\n\t            return this;\n\t        }\n\t\n\t        return (0, _utils.extend)({\n\t            from: from,\n\t            transform: transform,\n\t            sync: sync\n\t        }, query(options), repository(options), actions(options));\n\t    }\n\t\n\t    function update(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).update(object);\n\t    }\n\t\n\t    function patch(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).patch(object);\n\t    }\n\t\n\t    function destroy(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).destroy(object);\n\t    }\n\t\n\t    var api = {\n\t        config: config,\n\t        update: update,\n\t        patch: patch,\n\t        destroy: destroy\n\t    };\n\t\n\t    return (0, _utils.extend)(yawp, api);\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar _baseUrl = '/api';\n\tvar _defaultFetchOptions = {};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar DEFAULT_BASE_URL = '/fixtures';\n\tvar DEFAULT_RESET_URL = '/_ah/yawp/datastore/delete_all';\n\tvar DEFAULT_LAZY_PROPERTIES = ['id']; // needed till harmony proxies\n\t\n\texports.default = function (request) {\n\t    var Fixtures = function () {\n\t        function Fixtures() {\n\t            _classCallCheck(this, Fixtures);\n\t\n\t            this._baseUrl = DEFAULT_BASE_URL;\n\t            this._resetUrl = DEFAULT_RESET_URL;\n\t            this._lazyProperties = DEFAULT_LAZY_PROPERTIES;\n\t            this.promise = null;\n\t            this.fixtures = [];\n\t            this.lazy = {};\n\t        }\n\t\n\t        _createClass(Fixtures, [{\n\t            key: 'config',\n\t            value: function config(callback) {\n\t                callback(this);\n\t            }\n\t        }, {\n\t            key: 'baseUrl',\n\t            value: function baseUrl(url) {\n\t                this._baseUrl = url;\n\t            }\n\t        }, {\n\t            key: 'resetUrl',\n\t            value: function resetUrl(url) {\n\t                this._resetUrl = url;\n\t            }\n\t        }, {\n\t            key: 'lazyProperties',\n\t            value: function lazyProperties(properties) {\n\t                this._lazyProperties = properties;\n\t            }\n\t        }, {\n\t            key: 'reset',\n\t            value: function reset(all) {\n\t                var _this = this;\n\t\n\t                return request(this._resetUrl, {\n\t                    method: 'GET'\n\t                }).then(function () {\n\t                    _this.clear(all);\n\t                });\n\t            }\n\t        }, {\n\t            key: 'clear',\n\t            value: function clear(all) {\n\t                this.promise = null;\n\t                var _iteratorNormalCompletion = true;\n\t                var _didIteratorError = false;\n\t                var _iteratorError = undefined;\n\t\n\t                try {\n\t                    for (var _iterator = this.fixtures[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                        var _step$value = _step.value;\n\t                        var name = _step$value.name;\n\t                        var path = _step$value.path;\n\t\n\t                        this.bindFixture(name, path);\n\t                        all && this.bindLazy(name, path);\n\t                    }\n\t                } catch (err) {\n\t                    _didIteratorError = true;\n\t                    _iteratorError = err;\n\t                } finally {\n\t                    try {\n\t                        if (!_iteratorNormalCompletion && _iterator.return) {\n\t                            _iterator.return();\n\t                        }\n\t                    } finally {\n\t                        if (_didIteratorError) {\n\t                            throw _iteratorError;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        }, {\n\t            key: 'bind',\n\t            value: function bind(name, path) {\n\t                this.fixtures.push({ name: name, path: path });\n\t                this.bindFixture(name, path);\n\t                this.bindLazy(name);\n\t            }\n\t        }, {\n\t            key: 'bindFixture',\n\t            value: function bindFixture(name, path) {\n\t                this[name] = new Fixture(this, name, path).api;\n\t            }\n\t        }, {\n\t            key: 'bindLazy',\n\t            value: function bindLazy(name) {\n\t                this.lazy[name] = new Lazy(this, name).api;\n\t            }\n\t        }, {\n\t            key: 'chain',\n\t            value: function chain(promiseFn) {\n\t                if (!this.promise) {\n\t                    this.promise = promiseFn();\n\t                } else {\n\t                    this.promise = this.promise.then(promiseFn);\n\t                }\n\t                return this.promise;\n\t            }\n\t        }, {\n\t            key: 'load',\n\t            value: function load(callback) {\n\t                if (!this.promise) {\n\t                    return new Promise(function () {\n\t                        return callback && callback();\n\t                    });\n\t                }\n\t                return this.promise.then(function () {\n\t                    return callback && callback();\n\t                });\n\t            }\n\t        }]);\n\t\n\t        return Fixtures;\n\t    }();\n\t\n\t    var Fixture = function () {\n\t        function Fixture(fx, name, path) {\n\t            _classCallCheck(this, Fixture);\n\t\n\t            this.fx = fx;\n\t            this.name = name;\n\t            this.path = path;\n\t            this.api = this.createApi();\n\t        }\n\t\n\t        _createClass(Fixture, [{\n\t            key: 'createApi',\n\t            value: function createApi() {\n\t                var _this2 = this;\n\t\n\t                var api = function api(key, data) {\n\t                    return _this2.fx.chain(_this2.load(key, data));\n\t                };\n\t                api.self = this;\n\t                return api;\n\t            }\n\t        }, {\n\t            key: 'url',\n\t            value: function url() {\n\t                return this.fx._baseUrl + this.path;\n\t            }\n\t        }, {\n\t            key: 'load',\n\t            value: function load(key, data) {\n\t                this.createStubs(key);\n\t                return this.createLoadPromiseFn(key, data);\n\t            }\n\t        }, {\n\t            key: 'createLoadPromiseFn',\n\t            value: function createLoadPromiseFn(key, data) {\n\t                var _this3 = this;\n\t\n\t                if (!data) {\n\t                    data = this.getLazyDataFor(key);\n\t                }\n\t\n\t                return function () {\n\t                    if (_this3.isLoaded(key)) {\n\t                        return _this3.api[key];\n\t                    }\n\t\n\t                    return _this3.prepare(data).then(function (object) {\n\t                        return request(_this3.url(), {\n\t                            method: 'POST',\n\t                            json: true,\n\t                            body: JSON.stringify(object)\n\t                        }).then(function (response) {\n\t                            _this3.api[key] = response;\n\t                            return response;\n\t                        });\n\t                    });\n\t                };\n\t            }\n\t        }, {\n\t            key: 'getLazyDataFor',\n\t            value: function getLazyDataFor(key) {\n\t                var lazy = this.fx.lazy[this.name].self;\n\t                return lazy.getData(key);\n\t            }\n\t        }, {\n\t            key: 'prepare',\n\t            value: function prepare(data) {\n\t                var _this4 = this;\n\t\n\t                return new Promise(function (resolve) {\n\t                    var object = {};\n\t                    (0, _utils.extend)(object, data);\n\t\n\t                    var lazyProperties = [];\n\t                    _this4.inspectLazyProperties(object, lazyProperties);\n\t                    _this4.resolveLazyProperties(object, lazyProperties, resolve);\n\t                });\n\t            }\n\t        }, {\n\t            key: 'resolveLazyProperties',\n\t            value: function resolveLazyProperties(object, lazyProperties, resolve) {\n\t                if (!lazyProperties.length) {\n\t                    resolve(object);\n\t                } else {\n\t                    var promise = lazyProperties[0]();\n\t                    for (var i = 1, l = lazyProperties.length; i < l; i++) {\n\t                        promise = promise.then(lazyProperties[i]);\n\t                    }\n\t\n\t                    promise.then(function () {\n\t                        resolve(object);\n\t                    });\n\t                }\n\t            }\n\t        }, {\n\t            key: 'inspectLazyProperties',\n\t            value: function inspectLazyProperties(object, lazyProperties) {\n\t                var _this5 = this;\n\t\n\t                var _iteratorNormalCompletion2 = true;\n\t                var _didIteratorError2 = false;\n\t                var _iteratorError2 = undefined;\n\t\n\t                try {\n\t                    var _loop = function _loop() {\n\t                        var key = _step2.value;\n\t\n\t                        var value = object[key];\n\t                        if (value instanceof Function) {\n\t                            lazyProperties.push(function () {\n\t                                return value().then(function (actualValue) {\n\t                                    object[key] = actualValue;\n\t                                });\n\t                            });\n\t                            return 'continue';\n\t                        }\n\t                        if (value instanceof Object) {\n\t                            _this5.inspectLazyProperties(value, lazyProperties);\n\t                            return {\n\t                                v: void 0\n\t                            };\n\t                        }\n\t                    };\n\t\n\t                    for (var _iterator2 = Object.keys(object)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t                        var _ret = _loop();\n\t\n\t                        switch (_ret) {\n\t                            case 'continue':\n\t                                continue;\n\t\n\t                            default:\n\t                                if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t                        }\n\t                    }\n\t                } catch (err) {\n\t                    _didIteratorError2 = true;\n\t                    _iteratorError2 = err;\n\t                } finally {\n\t                    try {\n\t                        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t                            _iterator2.return();\n\t                        }\n\t                    } finally {\n\t                        if (_didIteratorError2) {\n\t                            throw _iteratorError2;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        }, {\n\t            key: 'createStubs',\n\t            value: function createStubs(key) {\n\t                if (this.hasStubs(key)) {\n\t                    return;\n\t                }\n\t                var self = this;\n\t                this.api[key] = this.fx._lazyProperties.reduce(function (map, property) {\n\t                    map[property] = function () {\n\t                        return new Promise(function (resolve) {\n\t                            return resolve(self.api[key][property]);\n\t                        });\n\t                    };\n\t                    return map;\n\t                }, {});\n\t                this.api[key].__stub__ = true;\n\t            }\n\t        }, {\n\t            key: 'isLoaded',\n\t            value: function isLoaded(key) {\n\t                return this.api[key] && !this.hasStubs(key);\n\t            }\n\t        }, {\n\t            key: 'hasStubs',\n\t            value: function hasStubs(key) {\n\t                return this.api[key] && this.api[key].__stub__;\n\t            }\n\t        }]);\n\t\n\t        return Fixture;\n\t    }();\n\t\n\t    var Lazy = function () {\n\t        function Lazy(fx, name) {\n\t            _classCallCheck(this, Lazy);\n\t\n\t            this.fx = fx;\n\t            this.name = name;\n\t            this.data = {};\n\t            this.api = this.createApi();\n\t        }\n\t\n\t        _createClass(Lazy, [{\n\t            key: 'createApi',\n\t            value: function createApi() {\n\t                var _this6 = this;\n\t\n\t                var api = function api(key, data) {\n\t                    _this6.createLazyStubs(key);\n\t                    _this6.data[key] = data;\n\t                };\n\t                api.self = this;\n\t                return api;\n\t            }\n\t        }, {\n\t            key: 'getData',\n\t            value: function getData(key) {\n\t                return this.data[key];\n\t            }\n\t        }, {\n\t            key: 'createLazyStubs',\n\t            value: function createLazyStubs(key) {\n\t                var _this7 = this;\n\t\n\t                if (this.hasStubs(key)) {\n\t                    return;\n\t                }\n\t                this.api[key] = this.fx._lazyProperties.reduce(function (map, property) {\n\t                    map[property] = function () {\n\t                        return _this7.getFixtureRef().load(key)().then(function (object) {\n\t                            return object[property];\n\t                        });\n\t                    };\n\t                    return map;\n\t                }, {});\n\t                this.api[key].__stub__ = true;\n\t            }\n\t        }, {\n\t            key: 'hasStubs',\n\t            value: function hasStubs(key) {\n\t                return this.api[key] && this.api[key].__stub__;\n\t            }\n\t        }, {\n\t            key: 'getFixtureRef',\n\t            value: function getFixtureRef() {\n\t                return this.fx[this.name].self;\n\t            }\n\t        }]);\n\t\n\t        return Lazy;\n\t    }();\n\t\n\t    return new Fixtures();\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** yawp.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 91f1a20bbaf4af4efc77\n **/","import request from './request';\n\nvar yawp = require('./../commons/yawp')(request);\nvar fixtures = require('./../commons/fixtures')(request);\n\nyawp.fixtures = fixtures;\n\nexport default yawp;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/index.js\n **/","import { extend, toUrlParam } from '../commons/utils';\n\nexport default function (url, options) {\n    return new Promise((resolve, reject) => {\n        var query = options.query;\n        delete options.query;\n\n        var request = new XMLHttpRequest();\n\n        request.onreadystatechange = function () {\n            resolveOrReject(request, options, resolve, reject);\n        };\n\n        request.open(options.method, url + (query ? '?' + toUrlParam(query) : ''));\n        setHeaders(request, options.headers);\n        request.send(options.body);\n    });\n}\n\nfunction resolveOrReject(request, options, resolve, reject) {\n    if (request.readyState === 4) {\n        if (request.status === 200) {\n            resolve(options.json ? JSON.parse(request.responseText) : request.responseText);\n        } else {\n            reject(request);\n        }\n    }\n}\n\nfunction setHeaders(request, headers) {\n    headers = headers || {};\n    extend(headers, {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json;charset=UTF-8',\n    });\n    for (var key in headers) {\n        if (headers.hasOwnProperty(key)) {\n            request.setRequestHeader(key, headers[key]);\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/request.js\n **/","export function extend() {\n    var result = arguments[0] || {};\n\n    for (var i = 1, l = arguments.length; i < l; i++) {\n        var obj = arguments[i];\n        for (var attrname in obj) {\n            result[attrname] = obj[attrname];\n        }\n    }\n\n    return result;\n}\n\nexport function toUrlParam(jsonParams) {\n    return Object.keys(jsonParams).map(function (k) {\n        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n    }).join('&');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/utils.js\n **/","import { extend } from './utils';\n\nvar baseUrl = '/api';\nvar defaultFetchOptions = {};\n\nexport default function (request) {\n\n    function config(callback) {\n        var c = {\n            baseUrl: function (url) {\n                baseUrl = url;\n            },\n            defaultFetchOptions: function (options) {\n                defaultFetchOptions = options;\n            }\n        };\n\n        callback(c);\n    }\n\n    function baseRequest(type, options) {\n        var url = baseUrl + options.url;\n        var body = options.data;\n        delete options.url;\n\n        options.method = type;\n        options.body = body;\n        options.json = true;\n        extend(options, defaultFetchOptions);\n\n        return request(url, options);\n    }\n\n    function extractId(object) {\n        if (object.id) {\n            return object.id;\n        }\n        throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n    }\n\n    function query(options) {\n        var q = {};\n\n        function where(data) {\n            if (arguments.length === 1) {\n                q.where = data;\n            } else {\n                q.where = [].slice.call(arguments);\n            }\n            return this;\n        }\n\n        function order(data) {\n            q.order = data;\n            return this;\n        }\n\n        function sort(data) {\n            q.sort = data;\n            return this;\n        }\n\n        function limit(data) {\n            q.limit = data;\n            return this;\n        }\n\n        function fetch(callback) {\n            return baseRequest('GET', options()).then(callback);\n        }\n\n        function setupQuery() {\n            if (Object.keys(q).length > 0) {\n                options.addQueryParameter('q', JSON.stringify(q));\n            }\n        }\n\n        function url(decode) {\n            setupQuery();\n            var url = baseUrl + options().url + (options().query ? '?' + toUrlParam(options().query) : '');\n            if (decode) {\n                return decodeURIComponent(url);\n            }\n            return url;\n        }\n\n        function list(callback) {\n            setupQuery();\n            return baseRequest('GET', options()).then(callback);\n        }\n\n        function first(callback) {\n            limit(1);\n\n            return list(function (objects) {\n                var object = objects.length === 0 ? null : objects[0];\n                if (callback) {\n                    callback(object);\n                }\n            });\n        }\n\n        function only(callback) {\n            return list(function (objects) {\n                if (objects.length !== 1) {\n                    throw 'called only but got ' + objects.length + ' results';\n                }\n                if (callback) {\n                    callback(objects[0]);\n                }\n            });\n        }\n\n        return {\n            where: where,\n            order: order,\n            sort: sort,\n            limit: limit,\n            fetch: fetch,\n            list: list,\n            first: first,\n            only: only,\n            url: url\n        };\n    }\n\n    function repository(options) {\n        function create(object) {\n            options().data = JSON.stringify(object);\n            return baseRequest('POST', options());\n        }\n\n        function update(object) {\n            options().data = JSON.stringify(object);\n            return baseRequest('PUT', options());\n        }\n\n        function patch(object) {\n            options().data = JSON.stringify(object);\n            return baseRequest('PATCH', options());\n        }\n\n        function destroy() {\n            return baseRequest('DELETE', options());\n        }\n\n        return {\n            create: create,\n            update: update,\n            patch: patch,\n            destroy: destroy\n        };\n    }\n\n    function actions(options) {\n        function actionOptions(action) {\n            options().url += '/' + action;\n            return options();\n        }\n\n        function json(object) {\n            options.setJson(object);\n            return this;\n        }\n\n        function params(params) {\n            options.addQueryParameters(params);\n            return this;\n        }\n\n        function get(action) {\n            return baseRequest('GET', actionOptions(action));\n        }\n\n        function put(action) {\n            return baseRequest('PUT', actionOptions(action));\n        }\n\n        function _patch(action) {\n            return baseRequest('PATCH', actionOptions(action));\n        }\n\n        function post(action) {\n            return baseRequest('POST', actionOptions(action));\n        }\n\n        function _delete(action) {\n            return baseRequest('DELETE', actionOptions(action));\n        }\n\n        return {\n            json: json,\n            params: params,\n            get: get,\n            put: put,\n            _patch: _patch,\n            post: post,\n            _delete: _delete\n        };\n    }\n\n    function yawp(baseArg) {\n        function normalize(arg) {\n            if (!arg) {\n                return '';\n            }\n            if (arg instanceof Object) {\n                return extractId(arg);\n            }\n            return arg;\n        }\n\n        var ajaxOptions = {\n            url: normalize(baseArg),\n            async: true\n        };\n\n        function options() {\n            return ajaxOptions;\n        }\n\n        options.setJson = function (object) {\n            ajaxOptions.data = JSON.stringify(object);\n        };\n\n        options.addQueryParameters = function (params) {\n            ajaxOptions.query = extend(ajaxOptions.query, params);\n        };\n\n        options.addQueryParameter = function (key, value) {\n            if (!ajaxOptions.query) {\n                ajaxOptions.query = {};\n            }\n            ajaxOptions.query[key] = value;\n        };\n\n        function from(parentBaseArg) {\n            var parentBase = normalize(parentBaseArg);\n            options().url = parentBase + options().url;\n            return this;\n        }\n\n        function transform(t) {\n            options.addQueryParameter('t', t);\n            return this;\n        }\n\n        function sync() {\n            ajaxOptions.async = false;\n            return this;\n        }\n\n        return extend({\n            from: from,\n            transform: transform,\n            sync: sync\n        }, query(options), repository(options), actions(options));\n    }\n\n    function update(object) {\n        var id = extractId(object);\n        return yawp(id).update(object);\n    }\n\n    function patch(object) {\n        var id = extractId(object);\n        return yawp(id).patch(object);\n    }\n\n    function destroy(object) {\n        var id = extractId(object);\n        return yawp(id).destroy(object);\n    }\n\n    var api = {\n        config: config,\n        update: update,\n        patch: patch,\n        destroy: destroy\n    };\n\n    return extend(yawp, api);\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/yawp.js\n **/","import { extend } from './utils';\n\nconst DEFAULT_BASE_URL = '/fixtures';\nconst DEFAULT_RESET_URL = '/_ah/yawp/datastore/delete_all';\nconst DEFAULT_LAZY_PROPERTIES = ['id']; // needed till harmony proxies\n\nexport default (request) => {\n\n    class Fixtures {\n        constructor() {\n            this._baseUrl = DEFAULT_BASE_URL;\n            this._resetUrl = DEFAULT_RESET_URL;\n            this._lazyProperties = DEFAULT_LAZY_PROPERTIES;\n            this.promise = null;\n            this.fixtures = [];\n            this.lazy = {};\n        }\n\n        config(callback) {\n            callback(this);\n        }\n\n        baseUrl(url) {\n            this._baseUrl = url;\n        }\n\n        resetUrl(url) {\n            this._resetUrl = url;\n        }\n\n        lazyProperties(properties) {\n            this._lazyProperties = properties;\n        }\n\n        reset(all) {\n            return request(this._resetUrl, {\n                method: 'GET'\n            }).then(() => {\n                this.clear(all);\n            });\n        }\n\n        clear(all) {\n            this.promise = null;\n            for (let {name, path} of this.fixtures) {\n                this.bindFixture(name, path);\n                all && this.bindLazy(name, path);\n            }\n        }\n\n        bind(name, path) {\n            this.fixtures.push({name, path});\n            this.bindFixture(name, path);\n            this.bindLazy(name);\n        }\n\n        bindFixture(name, path) {\n            this[name] = new Fixture(this, name, path).api;\n        }\n\n        bindLazy(name) {\n            this.lazy[name] = new Lazy(this, name).api;\n        }\n\n        chain(promiseFn) {\n            if (!this.promise) {\n                this.promise = promiseFn();\n            } else {\n                this.promise = this.promise.then(promiseFn)\n            }\n            return this.promise;\n        }\n\n        load(callback) {\n            if (!this.promise) {\n                return new Promise(() => callback && callback());\n            }\n            return this.promise.then(() => callback && callback());\n        }\n    }\n\n    class Fixture {\n        constructor(fx, name, path) {\n            this.fx = fx;\n            this.name = name;\n            this.path = path;\n            this.api = this.createApi();\n        }\n\n        createApi() {\n            var api = (key, data) => {\n                return this.fx.chain(this.load(key, data));\n            };\n            api.self = this;\n            return api;\n        }\n\n        url() {\n            return this.fx._baseUrl + this.path;\n        }\n\n        load(key, data) {\n            this.createStubs(key);\n            return this.createLoadPromiseFn(key, data);\n        }\n\n        createLoadPromiseFn(key, data) {\n            if (!data) {\n                data = this.getLazyDataFor(key);\n            }\n\n            return () => {\n                if (this.isLoaded(key)) {\n                    return this.api[key];\n                }\n\n                return this.prepare(data).then((object) => {\n                    return request(this.url(), {\n                        method: 'POST',\n                        json: true,\n                        body: JSON.stringify(object)\n                    }).then((response) => {\n                        this.api[key] = response;\n                        return response;\n\n                    })\n                });\n            }\n        }\n\n        getLazyDataFor(key) {\n            var lazy = this.fx.lazy[this.name].self;\n            return lazy.getData(key);\n        }\n\n        prepare(data) {\n            return new Promise((resolve) => {\n                let object = {};\n                extend(object, data);\n\n                let lazyProperties = [];\n                this.inspectLazyProperties(object, lazyProperties);\n                this.resolveLazyProperties(object, lazyProperties, resolve);\n            });\n        }\n\n        resolveLazyProperties(object, lazyProperties, resolve) {\n            if (!lazyProperties.length) {\n                resolve(object);\n            } else {\n                var promise = lazyProperties[0]();\n                for (var i = 1, l = lazyProperties.length; i < l; i++) {\n                    promise = promise.then(lazyProperties[i]);\n                }\n\n                promise.then(() => {\n                    resolve(object);\n                });\n            }\n        }\n\n        inspectLazyProperties(object, lazyProperties) {\n            for (let key of Object.keys(object)) {\n                let value = object[key];\n                if (value instanceof Function) {\n                    lazyProperties.push(() => {\n                        return value().then((actualValue) => {\n                            object[key] = actualValue;\n                        });\n                    });\n                    continue;\n                }\n                if (value instanceof Object) {\n                    this.inspectLazyProperties(value, lazyProperties);\n                    return;\n                }\n            }\n        }\n\n        createStubs(key) {\n            if (this.hasStubs(key)) {\n                return;\n            }\n            let self = this;\n            this.api[key] = this.fx._lazyProperties.reduce((map, property) => {\n                map[property] = () => {\n                    return new Promise((resolve) => resolve(self.api[key][property]));\n                }\n                return map;\n            }, {});\n            this.api[key].__stub__ = true;\n        }\n\n        isLoaded(key) {\n            return this.api[key] && !this.hasStubs(key);\n        }\n\n        hasStubs(key) {\n            return this.api[key] && this.api[key].__stub__;\n        }\n    }\n\n    class Lazy {\n        constructor(fx, name) {\n            this.fx = fx;\n            this.name = name;\n            this.data = {};\n            this.api = this.createApi();\n        }\n\n        createApi() {\n            let api = (key, data) => {\n                this.createLazyStubs(key);\n                this.data[key] = data;\n            };\n            api.self = this;\n            return api;\n        }\n\n        getData(key) {\n            return this.data[key];\n        }\n\n        createLazyStubs(key) {\n            if (this.hasStubs(key)) {\n                return;\n            }\n            this.api[key] = this.fx._lazyProperties.reduce((map, property) => {\n                map[property] = () => {\n                    return this.getFixtureRef().load(key)().then((object) => object[property]);\n                };\n                return map;\n            }, {});\n            this.api[key].__stub__ = true;\n        }\n\n        hasStubs(key) {\n            return this.api[key] && this.api[key].__stub__;\n        }\n\n        getFixtureRef() {\n            return this.fx[this.name].self;\n        }\n    }\n\n    return new Fixtures();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/fixtures.js\n **/"],"sourceRoot":""}