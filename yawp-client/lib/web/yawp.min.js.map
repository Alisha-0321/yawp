{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///yawp.min.js","webpack:///webpack/bootstrap bd07c2c44615c849c32f","webpack:///./src/web/index.js","webpack:///./src/web/request.js","webpack:///./src/commons/utils.js","webpack:///./src/commons/yawp2.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_request","_request2","yawp","resolveOrReject","request","options","resolve","reject","readyState","status","json","JSON","parse","responseText","setHeaders","headers","_utils","extend","Accept","Content-Type","key","hasOwnProperty","setRequestHeader","url","Promise","query","XMLHttpRequest","onreadystatechange","open","method","toUrlParam","send","body","result","arguments","i","l","length","attrname","jsonParams","keys","map","k","encodeURIComponent","join","_classCallCheck","instance","Constructor","TypeError","normalize","arg","extractId","object","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","_baseUrl","_defaultFetchOptions","baseArg","q","Yawp","create","parentBaseArg","parentBase","t","param","data","where","slice","order","sort","limit","cb","promise","baseRequest","then","stringify","decode","setupQuery","decodeURIComponent","callback","list","objects","console","log","action","_params","actionOptions","type","_options","config","baseUrl","defaultFetchOptions","update","patch","destroy","baseApi"],"mappings":"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","file":"yawp.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _request = __webpack_require__(1);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar yawp = __webpack_require__(3)(_request2.default);\n\t\n\texports.default = yawp;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (url, options) {\n\t    return new Promise(function (resolve, reject) {\n\t        var query = options.query;\n\t        delete options.query;\n\t\n\t        var request = new XMLHttpRequest();\n\t\n\t        request.onreadystatechange = function () {\n\t            resolveOrReject(request, options, resolve, reject);\n\t        };\n\t\n\t        request.open(options.method, url + (query ? '?' + (0, _utils.toUrlParam)(query) : ''));\n\t        setHeaders(request, options.headers);\n\t        request.send(options.body);\n\t    });\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tfunction resolveOrReject(request, options, resolve, reject) {\n\t    if (request.readyState === 4) {\n\t        if (request.status === 200) {\n\t            resolve(options.json ? JSON.parse(request.responseText) : request.responseText);\n\t        } else {\n\t            reject(request);\n\t        }\n\t    }\n\t}\n\t\n\tfunction setHeaders(request, headers) {\n\t    headers = headers || {};\n\t    (0, _utils.extend)(headers, {\n\t        'Accept': 'application/json',\n\t        'Content-Type': 'application/json;charset=UTF-8'\n\t    });\n\t    for (var key in headers) {\n\t        if (headers.hasOwnProperty(key)) {\n\t            request.setRequestHeader(key, headers[key]);\n\t        }\n\t    }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.extend = extend;\n\texports.toUrlParam = toUrlParam;\n\tfunction extend() {\n\t    var result = arguments[0] || {};\n\t\n\t    for (var i = 1, l = arguments.length; i < l; i++) {\n\t        var obj = arguments[i];\n\t        for (var attrname in obj) {\n\t            result[attrname] = obj[attrname];\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction toUrlParam(jsonParams) {\n\t    return Object.keys(jsonParams).map(function (k) {\n\t        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n\t    }).join('&');\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar _baseUrl = '/api';\n\tvar _defaultFetchOptions = {};\n\t\n\tfunction normalize(arg) {\n\t    if (!arg) {\n\t        return '';\n\t    }\n\t    if (arg instanceof Object) {\n\t        return extractId(arg);\n\t    }\n\t    return arg;\n\t}\n\t\n\tfunction extractId(object) {\n\t    if (object.id) {\n\t        return object.id;\n\t    }\n\t    throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n\t}\n\t\n\texports.default = function (request) {\n\t\n\t    function yawp(baseArg) {\n\t\n\t        var options = {\n\t            url: normalize(baseArg)\n\t        };\n\t\n\t        var q = {};\n\t\n\t        var Yawp = function () {\n\t            function Yawp(props) {\n\t                _classCallCheck(this, Yawp);\n\t\n\t                (0, _utils.extend)(this, props);\n\t            }\n\t\n\t            // prepare\n\t\n\t            _createClass(Yawp, [{\n\t                key: 'save',\n\t\n\t\n\t                // instance method\n\t\n\t                value: function save() {\n\t                    return Yawp.create(this);\n\t                }\n\t            }], [{\n\t                key: 'from',\n\t                value: function from(parentBaseArg) {\n\t                    var parentBase = normalize(parentBaseArg);\n\t                    options.url = parentBase + options.url;\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'transform',\n\t                value: function transform(t) {\n\t                    Yawp.param('t', t);\n\t                    return this;\n\t                }\n\t\n\t                // query\n\t\n\t            }, {\n\t                key: 'where',\n\t                value: function where(data) {\n\t                    if (arguments.length === 1) {\n\t                        q.where = data;\n\t                    } else {\n\t                        q.where = [].slice.call(arguments);\n\t                    }\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'order',\n\t                value: function order(data) {\n\t                    q.order = data;\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'sort',\n\t                value: function sort(data) {\n\t                    q.sort = data;\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'limit',\n\t                value: function limit(data) {\n\t                    q.limit = data;\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'fetch',\n\t                value: function fetch(cb) {\n\t                    var promise = baseRequest('GET', options);\n\t                    if (cb) {\n\t                        return promise.then(cb);\n\t                    }\n\t                    return promise;\n\t                }\n\t            }, {\n\t                key: 'setupQuery',\n\t                value: function setupQuery() {\n\t                    if (Object.keys(q).length > 0) {\n\t                        Yawp.param('q', JSON.stringify(q));\n\t                    }\n\t                }\n\t            }, {\n\t                key: 'url',\n\t                value: function url(decode) {\n\t                    Yawp.setupQuery();\n\t                    var url = _baseUrl + options.url + (options.query ? '?' + toUrlParam(options.query) : '');\n\t                    if (decode) {\n\t                        return decodeURIComponent(url);\n\t                    }\n\t                    return url;\n\t                }\n\t            }, {\n\t                key: 'list',\n\t                value: function list(cb) {\n\t                    Yawp.setupQuery();\n\t                    var promise = baseRequest('GET', options);\n\t                    if (cb) {\n\t                        return promise.then(cb);\n\t                    }\n\t                    return promise;\n\t                }\n\t            }, {\n\t                key: 'first',\n\t                value: function first(callback) {\n\t                    Yawp.limit(1);\n\t\n\t                    return Yawp.list(function (objects) {\n\t                        var object = objects.length === 0 ? null : objects[0];\n\t                        if (callback) {\n\t                            callback(object);\n\t                        }\n\t                    });\n\t                }\n\t            }, {\n\t                key: 'only',\n\t                value: function only(callback) {\n\t                    return Yawp.list(function (objects) {\n\t                        if (objects.length !== 1) {\n\t                            throw 'called only but got ' + objects.length + ' results';\n\t                        }\n\t                        if (callback) {\n\t                            callback(objects[0]);\n\t                        }\n\t                    });\n\t                }\n\t\n\t                // repository\n\t\n\t            }, {\n\t                key: 'create',\n\t                value: function create(object) {\n\t                    options.data = JSON.stringify(object);\n\t                    return baseRequest('POST', options);\n\t                }\n\t            }, {\n\t                key: 'update',\n\t                value: function update(object) {\n\t                    // TODO: deal with id\n\t                    console.log('update', object);\n\t                    options.data = JSON.stringify(object);\n\t                    return baseRequest('PUT', options);\n\t                }\n\t            }, {\n\t                key: 'patch',\n\t                value: function patch(object) {\n\t                    // TODO: deal with id\n\t                    options.data = JSON.stringify(object);\n\t                    return baseRequest('PATCH', options);\n\t                }\n\t            }, {\n\t                key: 'destroy',\n\t                value: function destroy() {\n\t                    // TODO: deal with id\n\t                    return baseRequest('DELETE', options);\n\t                }\n\t\n\t                // actions\n\t\n\t            }, {\n\t                key: 'actionOptions',\n\t                value: function actionOptions(action) {\n\t                    options.url += '/' + action;\n\t                    return options;\n\t                }\n\t            }, {\n\t                key: 'json',\n\t                value: function json(object) {\n\t                    options.data = JSON.stringify(object);\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'params',\n\t                value: function params(_params) {\n\t                    options.query = (0, _utils.extend)(options.query, _params);\n\t                    return this;\n\t                }\n\t            }, {\n\t                key: 'param',\n\t                value: function param(key, value) {\n\t                    if (!options.query) {\n\t                        options.query = {};\n\t                    }\n\t                    options.query[key] = value;\n\t                }\n\t            }, {\n\t                key: 'get',\n\t                value: function get(action) {\n\t                    return baseRequest('GET', Yawp.actionOptions(action));\n\t                }\n\t            }, {\n\t                key: 'put',\n\t                value: function put(action) {\n\t                    return baseRequest('PUT', Yawp.actionOptions(action));\n\t                }\n\t            }, {\n\t                key: '_patch',\n\t                value: function _patch(action) {\n\t                    return baseRequest('PATCH', Yawp.actionOptions(action));\n\t                }\n\t            }, {\n\t                key: 'post',\n\t                value: function post(action) {\n\t                    return baseRequest('POST', Yawp.actionOptions(action));\n\t                }\n\t            }, {\n\t                key: '_delete',\n\t                value: function _delete(action) {\n\t                    return baseRequest('DELETE', Yawp.actionOptions(action));\n\t                }\n\t            }]);\n\t\n\t            return Yawp;\n\t        }();\n\t\n\t        return Yawp;\n\t    }\n\t\n\t    // request\n\t\n\t    function baseRequest(type, _options) {\n\t        var options = (0, _utils.extend)({}, _options);\n\t\n\t        var url = _baseUrl + options.url;\n\t        var body = options.data;\n\t        delete options.url;\n\t        delete options.data;\n\t\n\t        options.method = type;\n\t        options.body = body;\n\t        options.json = true;\n\t        (0, _utils.extend)(options, _defaultFetchOptions);\n\t\n\t        //console.log('r', url, options);\n\t\n\t        return request(url, options);\n\t    }\n\t\n\t    // base api\n\t\n\t    function config(callback) {\n\t        var c = {\n\t            baseUrl: function baseUrl(url) {\n\t                _baseUrl = url;\n\t            },\n\t            defaultFetchOptions: function defaultFetchOptions(options) {\n\t                _defaultFetchOptions = options;\n\t            }\n\t        };\n\t        callback(c);\n\t    };\n\t\n\t    function update(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).update(object);\n\t    }\n\t\n\t    function patch(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).patch(object);\n\t    }\n\t\n\t    function destroy(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).destroy(object);\n\t    }\n\t\n\t    var baseApi = {\n\t        config: config,\n\t        update: update,\n\t        patch: patch,\n\t        destroy: destroy\n\t    };\n\t\n\t    return (0, _utils.extend)(yawp, baseApi);\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** yawp.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bd07c2c44615c849c32f\n **/","import request from './request';\n\nvar yawp = require('./../commons/yawp2')(request);\n\nexport default yawp;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/index.js\n **/","import { extend, toUrlParam } from '../commons/utils';\n\nexport default function (url, options) {\n    return new Promise((resolve, reject) => {\n        var query = options.query;\n        delete options.query;\n\n        var request = new XMLHttpRequest();\n\n        request.onreadystatechange = function () {\n            resolveOrReject(request, options, resolve, reject);\n        };\n\n        request.open(options.method, url + (query ? '?' + toUrlParam(query) : ''));\n        setHeaders(request, options.headers);\n        request.send(options.body);\n    });\n}\n\nfunction resolveOrReject(request, options, resolve, reject) {\n    if (request.readyState === 4) {\n        if (request.status === 200) {\n            resolve(options.json ? JSON.parse(request.responseText) : request.responseText);\n        } else {\n            reject(request);\n        }\n    }\n}\n\nfunction setHeaders(request, headers) {\n    headers = headers || {};\n    extend(headers, {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json;charset=UTF-8',\n    });\n    for (var key in headers) {\n        if (headers.hasOwnProperty(key)) {\n            request.setRequestHeader(key, headers[key]);\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/request.js\n **/","export function extend() {\n    var result = arguments[0] || {};\n\n    for (var i = 1, l = arguments.length; i < l; i++) {\n        var obj = arguments[i];\n        for (var attrname in obj) {\n            result[attrname] = obj[attrname];\n        }\n    }\n\n    return result;\n}\n\nexport function toUrlParam(jsonParams) {\n    return Object.keys(jsonParams).map(function (k) {\n        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n    }).join('&');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/utils.js\n **/","import { extend } from './utils';\n\nvar baseUrl = '/api';\nvar defaultFetchOptions = {};\n\nfunction normalize(arg) {\n    if (!arg) {\n        return '';\n    }\n    if (arg instanceof Object) {\n        return extractId(arg);\n    }\n    return arg;\n}\n\nfunction extractId(object) {\n    if (object.id) {\n        return object.id;\n    }\n    throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n}\n\nexport default (request) => {\n\n    function yawp(baseArg) {\n\n        var options = {\n            url: normalize(baseArg)\n        };\n\n        var q = {};\n\n        class Yawp {\n\n            constructor(props) {\n                extend(this, props);\n            }\n\n            // prepare\n\n            static from(parentBaseArg) {\n                var parentBase = normalize(parentBaseArg);\n                options.url = parentBase + options.url;\n                return this;\n            }\n\n            static transform(t) {\n                Yawp.param('t', t);\n                return this;\n            }\n\n            // query\n\n            static where(data) {\n                if (arguments.length === 1) {\n                    q.where = data;\n                } else {\n                    q.where = [].slice.call(arguments);\n                }\n                return this;\n            }\n\n            static order(data) {\n                q.order = data;\n                return this;\n            }\n\n            static sort(data) {\n                q.sort = data;\n                return this;\n            }\n\n            static limit(data) {\n                q.limit = data;\n                return this;\n            }\n\n            static fetch(cb) {\n                var promise = baseRequest('GET', options);\n                if (cb) {\n                    return promise.then(cb);\n                }\n                return promise;\n            }\n\n            static setupQuery() {\n                if (Object.keys(q).length > 0) {\n                    Yawp.param('q', JSON.stringify(q));\n                }\n            }\n\n            static url(decode) {\n                Yawp.setupQuery();\n                var url = baseUrl + options.url + (options.query ? '?' + toUrlParam(options.query) : '');\n                if (decode) {\n                    return decodeURIComponent(url);\n                }\n                return url;\n            }\n\n            static list(cb) {\n                Yawp.setupQuery();\n                var promise = baseRequest('GET', options);\n                if (cb) {\n                    return promise.then(cb);\n                }\n                return promise;\n            }\n\n            static first(callback) {\n                Yawp.limit(1);\n\n                return Yawp.list(function (objects) {\n                    var object = objects.length === 0 ? null : objects[0];\n                    if (callback) {\n                        callback(object);\n                    }\n                });\n            }\n\n            static only(callback) {\n                return Yawp.list(function (objects) {\n                    if (objects.length !== 1) {\n                        throw 'called only but got ' + objects.length + ' results';\n                    }\n                    if (callback) {\n                        callback(objects[0]);\n                    }\n                });\n            }\n\n            // repository\n\n            static create(object) {\n                options.data = JSON.stringify(object);\n                return baseRequest('POST', options);\n            }\n\n            static update(object) {\n                // TODO: deal with id\n                console.log('update', object);\n                options.data = JSON.stringify(object);\n                return baseRequest('PUT', options);\n            }\n\n            static patch(object) {\n                // TODO: deal with id\n                options.data = JSON.stringify(object);\n                return baseRequest('PATCH', options);\n            }\n\n            static destroy() {\n                // TODO: deal with id\n                return baseRequest('DELETE', options);\n            }\n\n            // actions\n\n            static actionOptions(action) {\n                options.url += '/' + action;\n                return options;\n            }\n\n            static json(object) {\n                options.data = JSON.stringify(object);\n                return this;\n            }\n\n            static params(params) {\n                options.query = extend(options.query, params);\n                return this;\n            }\n\n            static param(key, value) {\n                if (!options.query) {\n                    options.query = {};\n                }\n                options.query[key] = value;\n            }\n\n            static get(action) {\n                return baseRequest('GET', Yawp.actionOptions(action));\n            }\n\n            static put(action) {\n                return baseRequest('PUT', Yawp.actionOptions(action));\n            }\n\n            static _patch(action) {\n                return baseRequest('PATCH', Yawp.actionOptions(action));\n            }\n\n            static post(action) {\n                return baseRequest('POST', Yawp.actionOptions(action));\n            }\n\n            static _delete(action) {\n                return baseRequest('DELETE', Yawp.actionOptions(action));\n            }\n\n            // instance method\n\n            save() {\n                return Yawp.create(this);\n            }\n        }\n\n        return Yawp;\n    }\n\n    // request\n\n    function baseRequest(type, _options) {\n        var options = extend({}, _options);\n\n        var url = baseUrl + options.url;\n        var body = options.data;\n        delete options.url;\n        delete options.data;\n\n        options.method = type;\n        options.body = body;\n        options.json = true;\n        extend(options, defaultFetchOptions);\n\n        //console.log('r', url, options);\n\n        return request(url, options);\n    }\n\n    // base api\n\n    function config(callback) {\n        var c = {\n            baseUrl: (url) => {\n                baseUrl = url;\n            },\n            defaultFetchOptions: (options) => {\n                defaultFetchOptions = options;\n            }\n        };\n        callback(c);\n    };\n\n    function update(object) {\n        var id = extractId(object);\n        return yawp(id).update(object);\n    }\n\n    function patch(object) {\n        var id = extractId(object);\n        return yawp(id).patch(object);\n    }\n\n    function destroy(object) {\n        var id = extractId(object);\n        return yawp(id).destroy(object);\n    }\n\n    let baseApi = {\n        config,\n        update,\n        patch,\n        destroy\n    }\n\n    return extend(yawp, baseApi);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/yawp2.js\n **/"],"sourceRoot":""}