{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///yawp.min.js","webpack:///webpack/bootstrap 805ee6fd91c4c5eb5f02","webpack:///./src/web/index.js","webpack:///./src/web/request.js","webpack:///./src/commons/utils.js","webpack:///./src/commons/yawp.js","webpack:///./src/commons/fixtures.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_request","_request2","yawp","fixtures","setHeaders","request","headers","_utils","extend","Accept","Content-Type","key","hasOwnProperty","setRequestHeader","url","query","options","_fail","_done","_exception","_then","_error","toUrlParam","callbacks","fail","callback","async","onreadystatechange","done","exception","then","error","XMLHttpRequest","readyState","status","json","JSON","parse","responseText","responseJSON","open","method","send","body","result","arguments","i","l","length","attrname","jsonParams","keys","map","k","encodeURIComponent","join","config","baseUrl","_baseUrl","defaultFetchOptions","_defaultFetchOptions","baseRequest","type","data","extractId","object","where","q","slice","order","sort","limit","fetch","setupQuery","addQueryParameter","stringify","decode","decodeURIComponent","list","first","objects","only","repository","create","update","patch","destroy","actions","actionOptions","action","setJson","params","addQueryParameters","get","put","_patch","post","_delete","baseArg","normalize","arg","ajaxOptions","from","parentBaseArg","parentBase","transform","t","sync","api","_async","resetUrl","_resetUrl","lazyPropertyKeys","array","_lazyPropertyKeys","bind","endpointKey","endpoint","parentId","_bind","fixture","lazy","computeLazyApi","fn","bindFn","args","Array","prototype","unshift","apply","reset","cache","queue","parseFunctions","property","Function","prepareDataJSON","newData","save","console","retrievedObject","retrievedData","Error","hasLazy","saveFixtureToCache","loadFixtureFromCache","push","computeLazyPropertiesApi","apiKey","fixtureKey","addLazyPropertyApi","propertyKey","lazyPropertiesApi","lazyMap","addLazyApi","lazyProperties","lazyApi","load","promise"],"mappings":"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","file":"yawp.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"yawp\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"yawp\"] = factory();\n\telse\n\t\troot[\"yawp\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _request = __webpack_require__(1);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar yawp = __webpack_require__(3)(_request2.default);\n\tvar fixtures = __webpack_require__(4)(_request2.default);\n\t\n\tyawp.fixtures = fixtures;\n\t\n\texports.default = yawp;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (url, query, options) {\n\t    var _fail, _done, _exception, _then, _error, request;\n\t\n\t    url += query ? '?' + (0, _utils.toUrlParam)(query) : '';\n\t\n\t    var callbacks = {\n\t        fail: function fail(callback) {\n\t            _fail = callback;\n\t            if (!options.async) {\n\t                request.onreadystatechange();\n\t            }\n\t            return callbacks;\n\t        },\n\t        done: function done(callback) {\n\t            _done = callback;\n\t            if (!options.async) {\n\t                request.onreadystatechange();\n\t            }\n\t            return callbacks;\n\t        },\n\t        exception: function exception(callback) {\n\t            _exception = callback;\n\t            if (!options.async) {\n\t                request.onreadystatechange();\n\t            }\n\t            return callbacks;\n\t        },\n\t        then: function then(callback) {\n\t            _then = callback;\n\t            if (!options.async) {\n\t                request.onreadystatechange();\n\t            }\n\t            return callbacks;\n\t        },\n\t        error: function error(callback) {\n\t            _error = callback;\n\t            if (!options.async) {\n\t                request.onreadystatechange();\n\t            }\n\t            return callbacks;\n\t        }\n\t    };\n\t\n\t    request = new XMLHttpRequest();\n\t    request.onreadystatechange = function () {\n\t        if (request.readyState === 4) {\n\t            if (request.status === 200) {\n\t                if (_done) {\n\t                    _done(options.json ? JSON.parse(request.responseText) : request.responseText);\n\t                }\n\t                if (_then) {\n\t                    _then(options.json ? JSON.parse(request.responseText) : request.responseText);\n\t                }\n\t            } else {\n\t                if (_fail) {\n\t                    _fail(request);\n\t                }\n\t                if (_error) {\n\t                    _error((0, _utils.extend)({}, request, { responseJSON: JSON.parse(request.responseText) }));\n\t                }\n\t                if (_exception) {\n\t                    _exception(options.json ? JSON.parse(request.responseText) : request.responseText);\n\t                }\n\t            }\n\t        }\n\t    };\n\t\n\t    request.open(options.method, url, options.async);\n\t    setHeaders(request, options.headers);\n\t    request.send(options.body);\n\t\n\t    return callbacks;\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tfunction setHeaders(request, headers) {\n\t    headers = headers || {};\n\t    (0, _utils.extend)(headers, {\n\t        'Accept': 'application/json',\n\t        'Content-Type': 'application/json;charset=UTF-8'\n\t    });\n\t    for (var key in headers) {\n\t        if (headers.hasOwnProperty(key)) {\n\t            request.setRequestHeader(key, headers[key]);\n\t        }\n\t    }\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.extend = extend;\n\texports.toUrlParam = toUrlParam;\n\tfunction extend() {\n\t    var result = arguments[0] || {};\n\t\n\t    for (var i = 1, l = arguments.length; i < l; i++) {\n\t        var obj = arguments[i];\n\t        for (var attrname in obj) {\n\t            result[attrname] = obj[attrname];\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction toUrlParam(jsonParams) {\n\t    return Object.keys(jsonParams).map(function (k) {\n\t        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n\t    }).join('&');\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (request) {\n\t\n\t    function config(callback) {\n\t        var c = {\n\t            baseUrl: function baseUrl(url) {\n\t                _baseUrl = url;\n\t            },\n\t            defaultFetchOptions: function defaultFetchOptions(options) {\n\t                _defaultFetchOptions = options;\n\t            }\n\t        };\n\t\n\t        callback(c);\n\t    }\n\t\n\t    function baseRequest(type, options) {\n\t        var url = _baseUrl + options.url;\n\t        var query = options.query;\n\t        var body = options.data;\n\t        delete options.url;\n\t        delete options.query;\n\t\n\t        options.method = type;\n\t        options.body = body;\n\t        options.json = true;\n\t        (0, _utils.extend)(options, _defaultFetchOptions);\n\t\n\t        return request(url, query, options);\n\t    }\n\t\n\t    function extractId(object) {\n\t        if (object.id) {\n\t            return object.id;\n\t        }\n\t        throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n\t    }\n\t\n\t    function query(options) {\n\t        var q = {};\n\t\n\t        function where(data) {\n\t            if (arguments.length === 1) {\n\t                q.where = data;\n\t            } else {\n\t                q.where = [].slice.call(arguments);\n\t            }\n\t            return this;\n\t        }\n\t\n\t        function order(data) {\n\t            q.order = data;\n\t            return this;\n\t        }\n\t\n\t        function sort(data) {\n\t            q.sort = data;\n\t            return this;\n\t        }\n\t\n\t        function limit(data) {\n\t            q.limit = data;\n\t            return this;\n\t        }\n\t\n\t        function fetch(callback) {\n\t            return baseRequest('GET', options()).done(callback);\n\t        }\n\t\n\t        function setupQuery() {\n\t            if (Object.keys(q).length > 0) {\n\t                options.addQueryParameter('q', JSON.stringify(q));\n\t            }\n\t        }\n\t\n\t        function url(decode) {\n\t            setupQuery();\n\t            var url = _baseUrl + options().url + (options().query ? '?' + toUrlParam(options().query) : '');\n\t            if (decode) {\n\t                return decodeURIComponent(url);\n\t            }\n\t            return url;\n\t        }\n\t\n\t        function list(callback) {\n\t            setupQuery();\n\t            return baseRequest('GET', options()).done(callback);\n\t        }\n\t\n\t        function first(callback) {\n\t            limit(1);\n\t\n\t            return list(function (objects) {\n\t                var object = objects.length === 0 ? null : objects[0];\n\t                if (callback) {\n\t                    callback(object);\n\t                }\n\t            });\n\t        }\n\t\n\t        function only(callback) {\n\t            return list(function (objects) {\n\t                if (objects.length !== 1) {\n\t                    throw 'called only but got ' + objects.length + ' results';\n\t                }\n\t                if (callback) {\n\t                    callback(objects[0]);\n\t                }\n\t            });\n\t        }\n\t\n\t        return {\n\t            where: where,\n\t            order: order,\n\t            sort: sort,\n\t            limit: limit,\n\t            fetch: fetch,\n\t            list: list,\n\t            first: first,\n\t            only: only,\n\t            url: url\n\t        };\n\t    }\n\t\n\t    function repository(options) {\n\t        function create(object) {\n\t            options().data = JSON.stringify(object);\n\t            return baseRequest('POST', options());\n\t        }\n\t\n\t        function update(object) {\n\t            options().data = JSON.stringify(object);\n\t            return baseRequest('PUT', options());\n\t        }\n\t\n\t        function patch(object) {\n\t            options().data = JSON.stringify(object);\n\t            return baseRequest('PATCH', options());\n\t        }\n\t\n\t        function destroy() {\n\t            return baseRequest('DELETE', options());\n\t        }\n\t\n\t        return {\n\t            create: create,\n\t            update: update,\n\t            patch: patch,\n\t            destroy: destroy\n\t        };\n\t    }\n\t\n\t    function actions(options) {\n\t        function actionOptions(action) {\n\t            options().url += '/' + action;\n\t            return options();\n\t        }\n\t\n\t        function json(object) {\n\t            options.setJson(object);\n\t            return this;\n\t        }\n\t\n\t        function params(params) {\n\t            options.addQueryParameters(params);\n\t            return this;\n\t        }\n\t\n\t        function get(action) {\n\t            return baseRequest('GET', actionOptions(action));\n\t        }\n\t\n\t        function put(action) {\n\t            return baseRequest('PUT', actionOptions(action));\n\t        }\n\t\n\t        function _patch(action) {\n\t            return baseRequest('PATCH', actionOptions(action));\n\t        }\n\t\n\t        function post(action) {\n\t            return baseRequest('POST', actionOptions(action));\n\t        }\n\t\n\t        function _delete(action) {\n\t            return baseRequest('DELETE', actionOptions(action));\n\t        }\n\t\n\t        return {\n\t            json: json,\n\t            params: params,\n\t            get: get,\n\t            put: put,\n\t            _patch: _patch,\n\t            post: post,\n\t            _delete: _delete\n\t        };\n\t    }\n\t\n\t    function yawp(baseArg) {\n\t        function normalize(arg) {\n\t            if (!arg) {\n\t                return '';\n\t            }\n\t            if (arg instanceof Object) {\n\t                return extractId(arg);\n\t            }\n\t            return arg;\n\t        }\n\t\n\t        var ajaxOptions = {\n\t            url: normalize(baseArg),\n\t            async: true\n\t        };\n\t\n\t        function options() {\n\t            return ajaxOptions;\n\t        }\n\t\n\t        options.setJson = function (object) {\n\t            ajaxOptions.data = JSON.stringify(object);\n\t        };\n\t\n\t        options.addQueryParameters = function (params) {\n\t            ajaxOptions.query = (0, _utils.extend)(ajaxOptions.query, params);\n\t        };\n\t\n\t        options.addQueryParameter = function (key, value) {\n\t            if (!ajaxOptions.query) {\n\t                ajaxOptions.query = {};\n\t            }\n\t            ajaxOptions.query[key] = value;\n\t        };\n\t\n\t        function from(parentBaseArg) {\n\t            var parentBase = normalize(parentBaseArg);\n\t            options().url = parentBase + options().url;\n\t            return this;\n\t        }\n\t\n\t        function transform(t) {\n\t            options.addQueryParameter('t', t);\n\t            return this;\n\t        }\n\t\n\t        function sync() {\n\t            ajaxOptions.async = false;\n\t            return this;\n\t        }\n\t\n\t        return (0, _utils.extend)({\n\t            from: from,\n\t            transform: transform,\n\t            sync: sync\n\t        }, query(options), repository(options), actions(options));\n\t    }\n\t\n\t    function update(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).update(object);\n\t    }\n\t\n\t    function patch(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).patch(object);\n\t    }\n\t\n\t    function destroy(object) {\n\t        var id = extractId(object);\n\t        return yawp(id).destroy(object);\n\t    }\n\t\n\t    var api = {\n\t        config: config,\n\t        update: update,\n\t        patch: patch,\n\t        destroy: destroy\n\t    };\n\t\n\t    return (0, _utils.extend)(yawp, api);\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar _baseUrl = '/api';\n\tvar _defaultFetchOptions = {};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\texports.default = function (request) {\n\t\n\t    // config\n\t\n\t    function config(callback) {\n\t        var c = {\n\t            async: function async(value) {\n\t                _async = value;\n\t            },\n\t            baseUrl: function baseUrl(url) {\n\t                _baseUrl = url;\n\t            },\n\t            resetUrl: function resetUrl(url) {\n\t                _resetUrl = url;\n\t            },\n\t            lazyPropertyKeys: function lazyPropertyKeys(array) {\n\t                _lazyPropertyKeys = array;\n\t            },\n\t            bind: function bind(endpointKey, endpoint, parentId) {\n\t                api[endpointKey] = _bind(fixture, endpointKey, endpoint, parentId);\n\t            }\n\t        };\n\t\n\t        callback(c);\n\t\n\t        api.lazy = computeLazyApi();\n\t    }\n\t\n\t    // lib\n\t\n\t    var lazy = {};\n\t    var lazyProperties = {};\n\t\n\t    var cache = {};\n\t    var queue = [];\n\t\n\t    function _bind(fn, endpointKey, endpoint, parentId) {\n\t        var bindFn = function bindFn() {\n\t            var args = Array.prototype.slice.call(arguments, 0);\n\t            args.unshift(parentId);\n\t            args.unshift(endpoint);\n\t            args.unshift(endpointKey);\n\t            return fn.apply(this, args);\n\t        };\n\t        bindFn.endpoint = endpoint;\n\t        return bindFn;\n\t    }\n\t\n\t    function reset() {\n\t        return request(_resetUrl, null, {\n\t            method: 'GET',\n\t            async: _async\n\t        }).then(function () {\n\t            cache = {};\n\t            queue = [];\n\t        });\n\t    }\n\t\n\t    function parseFunctions(object) {\n\t        var i;\n\t        for (i in object) {\n\t            if (!object.hasOwnProperty(i)) {\n\t                continue;\n\t            }\n\t\n\t            var property = object[i];\n\t\n\t            if (property instanceof Function) {\n\t                object[i] = property();\n\t                continue;\n\t            }\n\t\n\t            if (property instanceof Object) {\n\t                parseFunctions(property);\n\t                continue;\n\t            }\n\t        }\n\t    }\n\t\n\t    function prepareDataJSON(data) {\n\t        var newData = {};\n\t        (0, _utils.extend)(newData, data);\n\t        parseFunctions(newData);\n\t        return JSON.stringify(newData);\n\t    }\n\t\n\t    function save(endpoint, parentId, data) {\n\t        if (!endpoint) {\n\t            console.error('not endpoint?!');\n\t        }\n\t\n\t        var url = _baseUrl + (parentId ? data[parentId] : '') + endpoint;\n\t        var query = null;\n\t\n\t        var result = request(url, query, {\n\t            method: 'POST',\n\t            async: _async,\n\t            json: true,\n\t            body: prepareDataJSON(data)\n\t        });\n\t\n\t        if (_async) {\n\t            return result;\n\t        }\n\t\n\t        var retrievedObject = null;\n\t        result.done(function (retrievedData) {\n\t            retrievedObject = retrievedData;\n\t        }).fail(function (data) {\n\t            throw Error('error: ' + data);\n\t        });\n\t        return retrievedObject;\n\t    }\n\t\n\t    function hasLazy(endpoint, key) {\n\t        if (!lazy[endpoint]) {\n\t            return false;\n\t        }\n\t        if (!lazy[endpoint][key]) {\n\t            return false;\n\t        }\n\t        return true;\n\t    }\n\t\n\t    function saveFixtureToCache(endpointKey, endpoint, parentId, data, key) {\n\t        var result = save(endpoint, parentId, data);\n\t\n\t        if (_async) {\n\t            result.then(function (object) {\n\t                cache[endpointKey][key] = object;\n\t            });\n\t            return result;\n\t        }\n\t\n\t        cache[endpointKey][key] = result;\n\t        return result;\n\t    }\n\t\n\t    function loadFixtureFromCache(endpointKey, key) {\n\t        if (!cache[endpointKey]) {\n\t            cache[endpointKey] = {};\n\t            return null;\n\t        }\n\t        return cache[endpointKey][key];\n\t    }\n\t\n\t    function fixture(endpointKey, endpoint, parentId, key, data) {\n\t        var object = loadFixtureFromCache(endpointKey, key);\n\t        if (object) {\n\t            return object;\n\t        }\n\t\n\t        if (!data) {\n\t            if (hasLazy(endpoint, key)) {\n\t                data = lazy[endpoint][key];\n\t            } else {\n\t                return null;\n\t            }\n\t        }\n\t\n\t        // TODO: mark for save and cache is called\n\t        if (!_async) {\n\t            return saveFixtureToCache(endpointKey, endpoint, parentId, data, key);\n\t        } else {\n\t            queue.push(function () {\n\t                return saveFixtureToCache(endpointKey, endpoint, parentId, data, key);\n\t            });\n\t        }\n\t    }\n\t\n\t    function map(objects) {\n\t        var result = {};\n\t\n\t        for (var i in objects) {\n\t            var object = objects[i];\n\t\n\t            var key = object.key;\n\t            var value = object.value;\n\t\n\t            if (key instanceof Function) {\n\t                key = key();\n\t            }\n\t\n\t            result[key] = value;\n\t        }\n\t        return result;\n\t    }\n\t\n\t    function computeLazyPropertiesApi(apiKey, fixtureKey) {\n\t        var i,\n\t            lazyPropertiesApi = {};\n\t\n\t        function addLazyPropertyApi(propertyKey) {\n\t            return function () {\n\t                return api[apiKey](fixtureKey)[propertyKey];\n\t            };\n\t        }\n\t\n\t        for (i = 0; i < _lazyPropertyKeys.length; i++) {\n\t            var propertyKey = _lazyPropertyKeys[i];\n\t            lazyPropertiesApi[propertyKey] = addLazyPropertyApi(propertyKey);\n\t        }\n\t\n\t        return lazyPropertiesApi;\n\t    }\n\t\n\t    function lazyMap(objects) {\n\t        return function () {\n\t            return map(objects);\n\t        };\n\t    }\n\t\n\t    function computeLazyApi() {\n\t        var lazyApi = {};\n\t\n\t        function addLazyApi(apiKey, endpoint) {\n\t            return function (fixtureKey, data) {\n\t                if (!lazy[endpoint]) {\n\t                    lazy[endpoint] = {};\n\t                    lazyProperties[endpoint] = {};\n\t                } else if (lazy[endpoint][fixtureKey]) {\n\t                    // lazy fixture already configured, someone is refering a\n\t                    // lazy property.\n\t                    return lazyProperties[endpoint][fixtureKey];\n\t                }\n\t\n\t                lazy[endpoint][fixtureKey] = data;\n\t                lazyProperties[endpoint][fixtureKey] = computeLazyPropertiesApi(apiKey, fixtureKey);\n\t            };\n\t        }\n\t\n\t        for (var apiKey in api) {\n\t            var endpoint = api[apiKey].endpoint;\n\t            lazyApi[apiKey] = addLazyApi(apiKey, endpoint);\n\t        }\n\t\n\t        lazyApi.map = lazyMap;\n\t        return lazyApi;\n\t    }\n\t\n\t    function load(callback) {\n\t        if (!queue.length) {\n\t            callback(cache);\n\t            return;\n\t        }\n\t\n\t        var promise = queue[0]();\n\t        for (var i = 1, l = queue.length; i < l; i++) {\n\t            promise = promise.then(queue[i]);\n\t        }\n\t\n\t        promise.then(function () {\n\t            queue = [];\n\t            callback(cache);\n\t        });\n\t    }\n\t\n\t    api.lazy = computeLazyApi();\n\t    api.load = load;\n\t    api.reset = reset;\n\t    api.map = map;\n\t    api.config = config;\n\t\n\t    return api;\n\t};\n\t\n\tvar _utils = __webpack_require__(2);\n\t\n\tvar _baseUrl = '/fixtures';\n\tvar _resetUrl = '/_ah/yawp/datastore/delete_all';\n\tvar _lazyPropertyKeys = ['id']; // needed till harmony proxies\n\tvar _async = true;\n\t\n\tvar api = {};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** yawp.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 805ee6fd91c4c5eb5f02\n **/","import request from './request';\n\nvar yawp = require('./../commons/yawp')(request);\nvar fixtures = require('./../commons/fixtures')(request);\n\nyawp.fixtures = fixtures;\n\nexport default yawp;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/index.js\n **/","import { extend, toUrlParam } from '../commons/utils';\n\nexport default function (url, query, options) {\n    var fail\n        , done\n        , exception\n        , then\n        , error\n        , request;\n\n    url += (query ? '?' + toUrlParam(query) : '');\n\n    var callbacks = {\n        fail: function (callback) {\n            fail = callback;\n            if (!options.async) {\n                request.onreadystatechange();\n            }\n            return callbacks;\n        },\n        done: function (callback) {\n            done = callback;\n            if (!options.async) {\n                request.onreadystatechange();\n            }\n            return callbacks;\n        },\n        exception: function (callback) {\n            exception = callback;\n            if (!options.async) {\n                request.onreadystatechange();\n            }\n            return callbacks;\n        },\n        then: function (callback) {\n            then = callback;\n            if (!options.async) {\n                request.onreadystatechange();\n            }\n            return callbacks;\n        },\n        error: function (callback) {\n            error = callback;\n            if (!options.async) {\n                request.onreadystatechange();\n            }\n            return callbacks;\n        }\n    };\n\n    request = new XMLHttpRequest();\n    request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n            if (request.status === 200) {\n                if (done) {\n                    done(options.json ? JSON.parse(request.responseText) : request.responseText);\n                }\n                if (then) {\n                    then(options.json ? JSON.parse(request.responseText) : request.responseText);\n                }\n            } else {\n                if (fail) {\n                    fail(request);\n                }\n                if (error) {\n                    error(extend({}, request, {responseJSON: JSON.parse(request.responseText)}));\n                }\n                if (exception) {\n                    exception(options.json ? JSON.parse(request.responseText) : request.responseText);\n                }\n            }\n        }\n    };\n\n    request.open(options.method, url, options.async);\n    setHeaders(request, options.headers);\n    request.send(options.body);\n\n    return callbacks;\n}\n\nfunction setHeaders(request, headers) {\n    headers = headers || {};\n    extend(headers, {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json;charset=UTF-8',\n    });\n    for (var key in headers) {\n        if (headers.hasOwnProperty(key)) {\n            request.setRequestHeader(key, headers[key]);\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/web/request.js\n **/","export function extend() {\n    var result = arguments[0] || {};\n\n    for (var i = 1, l = arguments.length; i < l; i++) {\n        var obj = arguments[i];\n        for (var attrname in obj) {\n            result[attrname] = obj[attrname];\n        }\n    }\n\n    return result;\n}\n\nexport function toUrlParam(jsonParams) {\n    return Object.keys(jsonParams).map(function (k) {\n        return encodeURIComponent(k) + '=' + encodeURIComponent(jsonParams[k]);\n    }).join('&');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/utils.js\n **/","import { extend } from './utils';\n\nvar baseUrl = '/api';\nvar defaultFetchOptions = {};\n\nexport default function (request) {\n\n    function config(callback) {\n        var c = {\n            baseUrl: function (url) {\n                baseUrl = url;\n            },\n            defaultFetchOptions: function (options) {\n                defaultFetchOptions = options;\n            }\n        };\n\n        callback(c);\n    }\n\n    function baseRequest(type, options) {\n        var url = baseUrl + options.url;\n        var query = options.query;\n        var body = options.data;\n        delete options.url;\n        delete options.query;\n\n        options.method = type;\n        options.body = body;\n        options.json = true;\n        extend(options, defaultFetchOptions);\n\n        return request(url, query, options);\n    }\n\n    function extractId(object) {\n        if (object.id) {\n            return object.id;\n        }\n        throw 'use yawp(id) if your endpoint does not have a @Id field called id';\n    }\n\n    function query(options) {\n        var q = {};\n\n        function where(data) {\n            if (arguments.length === 1) {\n                q.where = data;\n            } else {\n                q.where = [].slice.call(arguments);\n            }\n            return this;\n        }\n\n        function order(data) {\n            q.order = data;\n            return this;\n        }\n\n        function sort(data) {\n            q.sort = data;\n            return this;\n        }\n\n        function limit(data) {\n            q.limit = data;\n            return this;\n        }\n\n        function fetch(callback) {\n            return baseRequest('GET', options()).done(callback);\n        }\n\n        function setupQuery() {\n            if (Object.keys(q).length > 0) {\n                options.addQueryParameter('q', JSON.stringify(q));\n            }\n        }\n\n        function url(decode) {\n            setupQuery();\n            var url = baseUrl + options().url + (options().query ? '?' + toUrlParam(options().query) : '');\n            if (decode) {\n                return decodeURIComponent(url);\n            }\n            return url;\n        }\n\n        function list(callback) {\n            setupQuery();\n            return baseRequest('GET', options()).done(callback);\n        }\n\n        function first(callback) {\n            limit(1);\n\n            return list(function (objects) {\n                var object = objects.length === 0 ? null : objects[0];\n                if (callback) {\n                    callback(object);\n                }\n            });\n        }\n\n        function only(callback) {\n            return list(function (objects) {\n                if (objects.length !== 1) {\n                    throw 'called only but got ' + objects.length + ' results';\n                }\n                if (callback) {\n                    callback(objects[0]);\n                }\n            });\n        }\n\n        return {\n            where: where,\n            order: order,\n            sort: sort,\n            limit: limit,\n            fetch: fetch,\n            list: list,\n            first: first,\n            only: only,\n            url: url\n        };\n    }\n\n    function repository(options) {\n        function create(object) {\n            options().data = JSON.stringify(object);\n            return baseRequest('POST', options());\n        }\n\n        function update(object) {\n            options().data = JSON.stringify(object);\n            return baseRequest('PUT', options());\n        }\n\n        function patch(object) {\n            options().data = JSON.stringify(object);\n            return baseRequest('PATCH', options());\n        }\n\n        function destroy() {\n            return baseRequest('DELETE', options());\n        }\n\n        return {\n            create: create,\n            update: update,\n            patch: patch,\n            destroy: destroy\n        };\n    }\n\n    function actions(options) {\n        function actionOptions(action) {\n            options().url += '/' + action;\n            return options();\n        }\n\n        function json(object) {\n            options.setJson(object);\n            return this;\n        }\n\n        function params(params) {\n            options.addQueryParameters(params);\n            return this;\n        }\n\n        function get(action) {\n            return baseRequest('GET', actionOptions(action));\n        }\n\n        function put(action) {\n            return baseRequest('PUT', actionOptions(action));\n        }\n\n        function _patch(action) {\n            return baseRequest('PATCH', actionOptions(action));\n        }\n\n        function post(action) {\n            return baseRequest('POST', actionOptions(action));\n        }\n\n        function _delete(action) {\n            return baseRequest('DELETE', actionOptions(action));\n        }\n\n        return {\n            json: json,\n            params: params,\n            get: get,\n            put: put,\n            _patch: _patch,\n            post: post,\n            _delete: _delete\n        };\n    }\n\n    function yawp(baseArg) {\n        function normalize(arg) {\n            if (!arg) {\n                return '';\n            }\n            if (arg instanceof Object) {\n                return extractId(arg);\n            }\n            return arg;\n        }\n\n        var ajaxOptions = {\n            url: normalize(baseArg),\n            async: true\n        };\n\n        function options() {\n            return ajaxOptions;\n        }\n\n        options.setJson = function (object) {\n            ajaxOptions.data = JSON.stringify(object);\n        };\n\n        options.addQueryParameters = function (params) {\n            ajaxOptions.query = extend(ajaxOptions.query, params);\n        };\n\n        options.addQueryParameter = function (key, value) {\n            if (!ajaxOptions.query) {\n                ajaxOptions.query = {};\n            }\n            ajaxOptions.query[key] = value;\n        };\n\n        function from(parentBaseArg) {\n            var parentBase = normalize(parentBaseArg);\n            options().url = parentBase + options().url;\n            return this;\n        }\n\n        function transform(t) {\n            options.addQueryParameter('t', t);\n            return this;\n        }\n\n        function sync() {\n            ajaxOptions.async = false;\n            return this;\n        }\n\n        return extend({\n            from: from,\n            transform: transform,\n            sync: sync\n        }, query(options), repository(options), actions(options));\n    }\n\n    function update(object) {\n        var id = extractId(object);\n        return yawp(id).update(object);\n    }\n\n    function patch(object) {\n        var id = extractId(object);\n        return yawp(id).patch(object);\n    }\n\n    function destroy(object) {\n        var id = extractId(object);\n        return yawp(id).destroy(object);\n    }\n\n    var api = {\n        config: config,\n        update: update,\n        patch: patch,\n        destroy: destroy\n    };\n\n    return extend(yawp, api);\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/yawp.js\n **/","import { extend } from './utils';\n\nvar baseUrl = '/fixtures';\nvar resetUrl = '/_ah/yawp/datastore/delete_all';\nvar lazyPropertyKeys = ['id']; // needed till harmony proxies\nvar async = true;\n\nvar api = {};\n\nexport default function (request) {\n\n    // config\n\n    function config(callback) {\n        var c = {\n            async: function (value) {\n                async = value;\n            },\n            baseUrl: function (url) {\n                baseUrl = url;\n            },\n            resetUrl: function (url) {\n                resetUrl = url;\n            },\n            lazyPropertyKeys: function (array) {\n                lazyPropertyKeys = array;\n            },\n            bind: function (endpointKey, endpoint, parentId) {\n                api[endpointKey] = bind(fixture, endpointKey, endpoint, parentId);\n            }\n        };\n\n        callback(c);\n\n        api.lazy = computeLazyApi();\n    }\n\n    // lib\n\n    var lazy = {};\n    var lazyProperties = {};\n\n    var cache = {};\n    var queue = [];\n\n    function bind(fn, endpointKey, endpoint, parentId) {\n        var bindFn = function () {\n            var args = Array.prototype.slice.call(arguments, 0);\n            args.unshift(parentId);\n            args.unshift(endpoint);\n            args.unshift(endpointKey);\n            return fn.apply(this, args);\n        };\n        bindFn.endpoint = endpoint;\n        return bindFn;\n    }\n\n    function reset() {\n        return request(resetUrl, null, {\n            method: 'GET',\n            async: async\n        }).then(() => {\n            cache = {};\n            queue = [];\n        });\n    }\n\n    function parseFunctions(object) {\n        var i;\n        for (i in object) {\n            if (!object.hasOwnProperty(i)) {\n                continue;\n            }\n\n            var property = object[i];\n\n            if (property instanceof Function) {\n                object[i] = property();\n                continue;\n            }\n\n            if (property instanceof Object) {\n                parseFunctions(property);\n                continue;\n            }\n        }\n    }\n\n    function prepareDataJSON(data) {\n        var newData = {};\n        extend(newData, data);\n        parseFunctions(newData);\n        return JSON.stringify(newData);\n    }\n\n    function save(endpoint, parentId, data) {\n        if (!endpoint) {\n            console.error('not endpoint?!');\n        }\n\n        var url = baseUrl + (parentId ? data[parentId] : '') + endpoint;\n        var query = null;\n\n        var result = request(url, query, {\n            method: 'POST',\n            async: async,\n            json: true,\n            body: prepareDataJSON(data)\n        });\n\n        if (async) {\n            return result;\n        }\n\n        var retrievedObject = null;\n        result.done(function (retrievedData) {\n            retrievedObject = retrievedData;\n        }).fail(function (data) {\n            throw Error('error: ' + data);\n        });\n        return retrievedObject;\n    }\n\n    function hasLazy(endpoint, key) {\n        if (!lazy[endpoint]) {\n            return false;\n        }\n        if (!lazy[endpoint][key]) {\n            return false;\n        }\n        return true;\n    }\n\n    function saveFixtureToCache(endpointKey, endpoint, parentId, data, key) {\n        var result = save(endpoint, parentId, data);\n\n        if (async) {\n            result.then((object) => {\n                cache[endpointKey][key] = object;\n            });\n            return result;\n        }\n\n        cache[endpointKey][key] = result;\n        return result;\n    }\n\n    function loadFixtureFromCache(endpointKey, key) {\n        if (!cache[endpointKey]) {\n            cache[endpointKey] = {};\n            return null;\n        }\n        return cache[endpointKey][key];\n    }\n\n    function fixture(endpointKey, endpoint, parentId, key, data) {\n        let object = loadFixtureFromCache(endpointKey, key);\n        if (object) {\n            return object;\n        }\n\n        if (!data) {\n            if (hasLazy(endpoint, key)) {\n                data = lazy[endpoint][key];\n            } else {\n                return null;\n            }\n        }\n\n        // TODO: mark for save and cache is called\n        if (!async) {\n            return saveFixtureToCache(endpointKey, endpoint, parentId, data, key);\n        } else {\n            queue.push(function () {\n                return saveFixtureToCache(endpointKey, endpoint, parentId, data, key);\n            });\n        }\n    }\n\n    function map(objects) {\n        var result = {};\n\n        for (var i in objects) {\n            var object = objects[i];\n\n            var key = object.key;\n            var value = object.value;\n\n            if (key instanceof Function) {\n                key = key();\n            }\n\n            result[key] = value;\n        }\n        return result;\n    }\n\n    function computeLazyPropertiesApi(apiKey, fixtureKey) {\n        var i, lazyPropertiesApi = {};\n\n        function addLazyPropertyApi(propertyKey) {\n            return function () {\n                return api[apiKey](fixtureKey)[propertyKey];\n            };\n        }\n\n        for (i = 0; i < lazyPropertyKeys.length; i++) {\n            var propertyKey = lazyPropertyKeys[i];\n            lazyPropertiesApi[propertyKey] = addLazyPropertyApi(propertyKey);\n        }\n\n        return lazyPropertiesApi;\n    }\n\n    function lazyMap(objects) {\n        return function () {\n            return map(objects);\n        };\n    }\n\n    function computeLazyApi() {\n        var lazyApi = {};\n\n        function addLazyApi(apiKey, endpoint) {\n            return function (fixtureKey, data) {\n                if (!lazy[endpoint]) {\n                    lazy[endpoint] = {};\n                    lazyProperties[endpoint] = {};\n                } else if (lazy[endpoint][fixtureKey]) {\n                    // lazy fixture already configured, someone is refering a\n                    // lazy property.\n                    return lazyProperties[endpoint][fixtureKey];\n                }\n\n                lazy[endpoint][fixtureKey] = data;\n                lazyProperties[endpoint][fixtureKey] = computeLazyPropertiesApi(apiKey, fixtureKey);\n            };\n        }\n\n        for (var apiKey in api) {\n            var endpoint = api[apiKey].endpoint;\n            lazyApi[apiKey] = addLazyApi(apiKey, endpoint);\n        }\n\n        lazyApi.map = lazyMap;\n        return lazyApi;\n    }\n\n    function load(callback) {\n        if (!queue.length) {\n            callback(cache);\n            return;\n        }\n\n        var promise = queue[0]();\n        for (var i = 1, l = queue.length; i < l; i++) {\n            promise = promise.then(queue[i]);\n        }\n\n        promise.then(() => {\n            queue = [];\n            callback(cache);\n        });\n    }\n\n    api.lazy = computeLazyApi();\n    api.load = load;\n    api.reset = reset;\n    api.map = map;\n    api.config = config;\n\n    return api;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/commons/fixtures.js\n **/"],"sourceRoot":""}