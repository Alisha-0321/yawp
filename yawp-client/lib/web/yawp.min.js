!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("yawp",[],t):"object"==typeof exports?exports.yawp=t():n.yawp=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var u=e[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var u=e(1),o=r(u),i=e(3)(o["default"]),f=e(4)(o["default"]);i.fixtures=f,t["default"]=i,n.exports=t["default"]},function(n,t,e){"use strict";function r(n,t,e,r){4===n.readyState&&(200===n.status?e(t.json?JSON.parse(n.responseText):n.responseText):r(n))}function u(n,t){t=t||{},(0,o.extend)(t,{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"});for(var e in t)t.hasOwnProperty(e)&&n.setRequestHeader(e,t[e])}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(n,t,e){return new Promise(function(i,f){var a=new XMLHttpRequest;a.onreadystatechange=function(){r(a,e,i,f)},a.open(e.method,n+(t?"?"+(0,o.toUrlParam)(t):"")),u(a,e.headers),a.send(e.body)})};var o=e(2);n.exports=t["default"]},function(n,t){"use strict";function e(){for(var n=arguments[0]||{},t=1,e=arguments.length;t<e;t++){var r=arguments[t];for(var u in r)n[u]=r[u]}return n}function r(n){return Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.extend=e,t.toUrlParam=r},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(n){function t(n){var t={baseUrl:function(n){u=n},defaultFetchOptions:function(n){o=n}};n(t)}function e(t,e){var i=u+e.url,f=e.query,a=e.data;return delete e.url,delete e.query,e.method=t,e.body=a,e.json=!0,(0,r.extend)(e,o),n(i,f,e)}function i(n){if(n.id)return n.id;throw"use yawp(id) if your endpoint does not have a @Id field called id"}function f(n){function t(n){return 1===arguments.length?p.where=n:p.where=[].slice.call(arguments),this}function r(n){return p.order=n,this}function o(n){return p.sort=n,this}function i(n){return p.limit=n,this}function f(t){return e("GET",n()).then(t)}function a(){Object.keys(p).length>0&&n.addQueryParameter("q",JSON.stringify(p))}function c(t){a();var e=u+n().url+(n().query?"?"+toUrlParam(n().query):"");return t?decodeURIComponent(e):e}function s(t){return a(),e("GET",n()).then(t)}function d(n){return i(1),s(function(t){var e=0===t.length?null:t[0];n&&n(e)})}function l(n){return s(function(t){if(1!==t.length)throw"called only but got "+t.length+" results";n&&n(t[0])})}var p={};return{where:t,order:r,sort:o,limit:i,fetch:f,list:s,first:d,only:l,url:c}}function a(n){function t(t){return n().data=JSON.stringify(t),e("POST",n())}function r(t){return n().data=JSON.stringify(t),e("PUT",n())}function u(t){return n().data=JSON.stringify(t),e("PATCH",n())}function o(){return e("DELETE",n())}return{create:t,update:r,patch:u,destroy:o}}function c(n){function t(t){return n().url+="/"+t,n()}function r(t){return n.setJson(t),this}function u(t){return n.addQueryParameters(t),this}function o(n){return e("GET",t(n))}function i(n){return e("PUT",t(n))}function f(n){return e("PATCH",t(n))}function a(n){return e("POST",t(n))}function c(n){return e("DELETE",t(n))}return{json:r,params:u,get:o,put:i,_patch:f,post:a,_delete:c}}function s(n){function t(n){return n?n instanceof Object?i(n):n:""}function e(){return d}function u(n){var r=t(n);return e().url=r+e().url,this}function o(n){return e.addQueryParameter("t",n),this}function s(){return d.async=!1,this}var d={url:t(n),async:!0};return e.setJson=function(n){d.data=JSON.stringify(n)},e.addQueryParameters=function(n){d.query=(0,r.extend)(d.query,n)},e.addQueryParameter=function(n,t){d.query||(d.query={}),d.query[n]=t},(0,r.extend)({from:u,transform:o,sync:s},f(e),a(e),c(e))}function d(n){var t=i(n);return s(t).update(n)}function l(n){var t=i(n);return s(t).patch(n)}function p(n){var t=i(n);return s(t).destroy(n)}var y={config:t,update:d,patch:l,destroy:p};return(0,r.extend)(s,y)};var r=e(2),u="/api",o={};n.exports=t["default"]},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(n){function t(n){var t={async:function(n){f=n},baseUrl:function(n){u=n},resetUrl:function(n){o=n},lazyPropertyKeys:function(n){i=n},bind:function(n,t,r){a[n]=e(v,n,t,r)}};n(t),a.lazy=g()}function e(n,t,e,r){var u=function(){var u=Array.prototype.slice.call(arguments,0);return u.unshift(r),u.unshift(e),u.unshift(t),n.apply(this,u)};return u.endpoint=e,u}function c(){return n(o,null,{method:"GET",async:f}).then(function(){w={},T=[]})}function s(n){var t={};return(0,r.extend)(t,n),new Promise(function(n){var e=[];d(e,t),e.length||n(t);for(var r=e[0](),u=1,o=e.length;u<o;u++)r=r.then(e[u]);r.then(function(){n(t)})})}function d(n,t){var e;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];r instanceof Function?n.push(function(){return r().then(function(n){t[e]=n})}):r instanceof Object&&d(n,r)}}function l(t,e,r){return t||console.error("not endpoint?!"),s(r).then(function(r){var o=u+(e?r[e]:"")+t;return n(o,null,{method:"POST",json:!0,body:JSON.stringify(r)})})}function p(n,t){return!!b[n]&&!!b[n][t]}function y(n,t,e,r,u){var o=l(t,e,r);return o.then(function(t){w[n][u]=t}),o}function h(n,t){return w[n]?w[n][t]:(w[n]={},null)}function v(n,t,e,r,u){var o=arguments.length<=5||void 0===arguments[5]||arguments[5],i=h(n,r);if(i)return function(){return new Promise(function(n){n(i)})};var f=!u;if(f){if(!p(t,r))throw"cannot resolve lazy fixture: "+n+" -> "+r;u=b[t][r]}var a=function(){return y(n,t,e,u,r)};return o&&T.push(a),a}function m(n){var t={};for(var e in n){var r=n[e],u=r.key,o=r.value;u instanceof Function&&(u=u()),t[u]=o}return t}function P(n,t){function e(e){return function(){var r=a[n](t,null,!1)();return r.then(function(){return w[n][t][e]})}}var r,u={};for(r=0;r<i.length;r++){var o=i[r];u[o]=e(o)}return u}function x(n){return function(){return m(n)}}function g(){function n(n,t){return function(e,r){if(b[t]){if(b[t][e])return j[t][e]}else b[t]={},j[t]={};b[t][e]=r,j[t][e]=P(n,e)}}var t={};for(var e in a){var r=a[e].endpoint;t[e]=n(e,r)}return t.map=x,t}function O(n){if(!T.length)return void n(w);for(var t=T[0](),e=1,r=T.length;e<r;e++)t=t.then(T[e]);t.then(function(){T=[],n(w)})}var b={},j={},w={},T=[];return a.lazy=g(),a.load=O,a.reset=c,a.map=m,a.config=t,a};var r=e(2),u="/fixtures",o="/_ah/yawp/datastore/delete_all",i=["id"],f=!0,a={};n.exports=t["default"]}])});
//# sourceMappingURL=yawp.min.js.map