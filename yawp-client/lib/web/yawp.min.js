!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("yawp",[],t):"object"==typeof exports?exports.yawp=t():e.yawp=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return e[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=r(u),a=n(3)(o["default"]);t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t,n,r){4===e.readyState&&(200===e.status?n(t.json?JSON.parse(e.responseText):e.responseText):r(e))}function u(e,t){t=t||{},(0,o.extend)(t,{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"});for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n])}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return new Promise(function(n,a){var i=t.query;delete t.query;var c=new XMLHttpRequest;c.onreadystatechange=function(){r(c,t,n,a)},c.open(t.method,e+(i?"?"+(0,o.toUrlParam)(i):"")),u(c,t.headers),c.send(t.body)})};var o=n(2);e.exports=t["default"]},function(e,t){"use strict";function n(){for(var e=arguments[0]||{},t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var u in r)e[u]=r[u]}return e}function r(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.extend=n,t.toUrlParam=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){return e?e instanceof Object?o(e):e:""}function o(e){if(e.id)return e.id;throw"use yawp(id) if your endpoint does not have a @Id field called id"}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),c="/api",f={};t["default"]=function(e){function t(e){var t={url:u(e)},o={},f=function(){function e(t){r(this,e),(0,i.extend)(this,t)}return a(e,[{key:"save",value:function(){return e.create(this)}}],[{key:"from",value:function(e){var n=u(e);return t.url=n+t.url,this}},{key:"transform",value:function(t){return e.param("t",t),this}},{key:"where",value:function(e){return 1===arguments.length?o.where=e:o.where=[].slice.call(arguments),this}},{key:"order",value:function(e){return o.order=e,this}},{key:"sort",value:function(e){return o.sort=e,this}},{key:"limit",value:function(e){return o.limit=e,this}},{key:"fetch",value:function(e){var r=n("GET",t);return e?r.then(e):r}},{key:"setupQuery",value:function(){Object.keys(o).length>0&&e.param("q",JSON.stringify(o))}},{key:"url",value:function f(n){e.setupQuery();var f=c+t.url+(t.query?"?"+toUrlParam(t.query):"");return n?decodeURIComponent(f):f}},{key:"list",value:function(r){e.setupQuery();var u=n("GET",t);return r?u.then(r):u}},{key:"first",value:function(t){return e.limit(1),e.list(function(e){var n=0===e.length?null:e[0];return t?t(n):n})}},{key:"only",value:function(t){return e.list(function(e){if(1!==e.length)throw"called only but got "+e.length+" results";var n=e[0];return t?t(n):n})}},{key:"create",value:function(e){return t.data=JSON.stringify(e),n("POST",t)}},{key:"update",value:function(e){return console.log("update",e),t.data=JSON.stringify(e),n("PUT",t)}},{key:"patch",value:function(e){return t.data=JSON.stringify(e),n("PATCH",t)}},{key:"destroy",value:function(){return n("DELETE",t)}},{key:"actionOptions",value:function(e){return t.url+="/"+e,t}},{key:"json",value:function(e){return t.data=JSON.stringify(e),this}},{key:"params",value:function(e){return t.query=(0,i.extend)(t.query,e),this}},{key:"param",value:function(e,n){t.query||(t.query={}),t.query[e]=n}},{key:"get",value:function(t){return n("GET",e.actionOptions(t))}},{key:"put",value:function(t){return n("PUT",e.actionOptions(t))}},{key:"_patch",value:function(t){return n("PATCH",e.actionOptions(t))}},{key:"post",value:function(t){return n("POST",e.actionOptions(t))}},{key:"_delete",value:function(t){return n("DELETE",e.actionOptions(t))}}]),e}();return f}function n(t,n){var r=(0,i.extend)({},n),u=c+r.url,o=r.data;return delete r.url,delete r.data,r.method=t,r.body=o,r.json=!0,(0,i.extend)(r,f),e(u,r)}function l(e){var t={baseUrl:function(e){c=e},defaultFetchOptions:function(e){f=e}};e(t)}function s(e){var n=o(e);return t(n).update(e)}function d(e){var n=o(e);return t(n).patch(e)}function y(e){var n=o(e);return t(n).destroy(e)}var p={config:l,update:s,patch:d,destroy:y};return(0,i.extend)(t,p)},e.exports=t["default"]}])});
//# sourceMappingURL=yawp.min.js.map