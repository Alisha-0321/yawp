!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("yawp",[],t):"object"==typeof exports?exports.yawp=t():e.yawp=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return e[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=r(u),a=n(3)(o["default"]);t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t,n,r){4===e.readyState&&(200===e.status?n(t.json?JSON.parse(e.responseText):e.responseText):r(e))}function u(e,t){t=t||{},(0,o.extend)(t,{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"});for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n])}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){return new Promise(function(n,a){var i=t.query;delete t.query;var c=new XMLHttpRequest;c.onreadystatechange=function(){r(c,t,n,a)},c.open(t.method,e+(i?"?"+(0,o.toUrlParam)(i):"")),u(c,t.headers),c.send(t.body)})};var o=n(2);e.exports=t["default"]},function(e,t){"use strict";function n(){for(var e=arguments[0]||{},t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var u in r)e[u]=r[u]}return e}function r(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.extend=n,t.toUrlParam=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){return e?e instanceof Object?a(e):e:""}function o(e){return e.id}function a(e){if(o(e))return e.id;throw"use yawp(id) if your endpoint does not have a @Id field called id"}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),s="/api",f={};t["default"]=function(e){function t(t){var n={},l={},y=function(){function y(e){r(this,y),(0,c.extend)(this,e)}return i(y,[{key:"save",value:function(e){var t=this.createOrUpdate();return e?t.then(e):t}},{key:"createOrUpdate",value:function(){var e,t=this;return o(this)?(n.url=this.id,e=y.update(this)):e=y.create(this).then(function(e){return t.id=e.id,e}),e}},{key:"destroy",value:function(e){n.url=a(this);var t=y.destroy();return e?t.then(e):t}},{key:"get",value:function(e){return n.url=a(this),y.get(e)}},{key:"put",value:function(e){return n.url=a(this),y.put(e)}},{key:"_patch",value:function(e){return n.url=a(this),y._patch(e)}},{key:"post",value:function(e){return n.url=a(this),y.post(e)}},{key:"_delete",value:function(e){return n.url=a(this),y._delete(e)}}],[{key:"clear",value:function(){n={url:u(t)}}},{key:"prepareRequestOptions",value:function(){var e=(0,c.extend)({},n);return y.clear(),e}},{key:"baseRequest",value:function(t){var n=y.prepareRequestOptions(),r=s+n.url;return delete n.url,n.method=t,n.json=!0,(0,c.extend)(n,f),e(r,n)}},{key:"wrapInstance",value:function(e){return new this(e)}},{key:"wrapArray",value:function(e){var t=this;return e.map(function(e){return t.wrapInstance(e)})}},{key:"from",value:function(e){var t=u(e);return n.url=t+n.url,this}},{key:"transform",value:function(e){return y.param("t",e),this}},{key:"where",value:function(e){return 1===arguments.length?l.where=e:l.where=[].slice.call(arguments),this}},{key:"order",value:function(e){return l.order=e,this}},{key:"sort",value:function(e){return l.sort=e,this}},{key:"limit",value:function(e){return l.limit=e,this}},{key:"fetch",value:function(e){var t=this,r="function"==typeof e?e:void 0;e&&!r&&(n.url+="/"+e);var u=y.baseRequest("GET").then(function(e){return t.wrapInstance(e)});return r?u.then(r):u}},{key:"setupQuery",value:function(){Object.keys(l).length>0&&y.param("q",JSON.stringify(l))}},{key:"list",value:function(e){var t=this;y.setupQuery();var n=y.baseRequest("GET").then(function(e){return t.wrapArray(e)});return e?n.then(e):n}},{key:"first",value:function(e){return y.limit(1),y.list(function(t){var n=0===t.length?null:t[0];return e?e(n):n})}},{key:"only",value:function(e){return y.list(function(t){if(1!==t.length)throw"called only but got "+t.length+" results";var n=t[0];return e?e(n):n})}},{key:"create",value:function(e){return n.body=JSON.stringify(e),y.baseRequest("POST")}},{key:"update",value:function(e){return n.body=JSON.stringify(e),y.baseRequest("PUT")}},{key:"patch",value:function(e){return n.body=JSON.stringify(e),y.baseRequest("PATCH")}},{key:"destroy",value:function(){return y.baseRequest("DELETE")}},{key:"json",value:function(e){return n.body=JSON.stringify(e),this}},{key:"params",value:function(e){return n.query=(0,c.extend)(n.query,e),this}},{key:"param",value:function(e,t){n.query||(n.query={}),n.query[e]=t}},{key:"action",value:function(e,t){return n.url+="/"+t,y.baseRequest(e)}},{key:"get",value:function(e){return y.action("GET",e)}},{key:"put",value:function(e){return y.action("PUT",e)}},{key:"_patch",value:function(e){return y.action("PATCH",e)}},{key:"post",value:function(e){return y.action("POST",e)}},{key:"_delete",value:function(e){return y.action("DELETE",e)}}]),y}();return y.clear(),y}function n(e){var t={baseUrl:function(e){s=e},defaultFetchOptions:function(e){f=e}};e(t)}function l(e){var n=a(e);return t(n).update(e)}function y(e){var n=a(e);return t(n).patch(e)}function p(e){var n=a(e);return t(n).destroy(e)}var d={config:n,update:l,patch:y,destroy:p};return(0,c.extend)(t,d)},e.exports=t["default"]}])});
//# sourceMappingURL=yawp.min.js.map