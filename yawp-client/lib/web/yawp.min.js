!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("yawp",[],t):"object"==typeof exports?exports.yawp=t():n.yawp=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var u=e[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var u=e(1),o=r(u),i=e(3)(o["default"]),a=e(4)(o["default"]);i.fixtures=a,t["default"]=i,n.exports=t["default"]},function(n,t,e){"use strict";function r(n,t){t=t||{},(0,u.extend)(t,{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"});for(var e in t)t.hasOwnProperty(e)&&n.setRequestHeader(e,t[e])}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(n,t,e){var o,i,a,c,f,s;n+=t?"?"+(0,u.toUrlParam)(t):"";var d={fail:function(n){return o=n,e.async||s.onreadystatechange(),d},done:function(n){return i=n,e.async||s.onreadystatechange(),d},exception:function(n){return a=n,e.async||s.onreadystatechange(),d},then:function(n){return c=n,e.async||s.onreadystatechange(),d},error:function(n){return f=n,e.async||s.onreadystatechange(),d}};return s=new XMLHttpRequest,s.onreadystatechange=function(){4===s.readyState&&(200===s.status?(i&&i(e.json?JSON.parse(s.responseText):s.responseText),c&&c(e.json?JSON.parse(s.responseText):s.responseText)):(o&&o(s),f&&f((0,u.extend)({},s,{responseJSON:JSON.parse(s.responseText)})),a&&a(e.json?JSON.parse(s.responseText):s.responseText)))},s.open(e.method,n,e.async),r(s,e.headers),s.send(e.body),d};var u=e(2);n.exports=t["default"]},function(n,t){"use strict";function e(){for(var n=arguments[0]||{},t=1,e=arguments.length;t<e;t++){var r=arguments[t];for(var u in r)n[u]=r[u]}return n}function r(n){return Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.extend=e,t.toUrlParam=r},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(n){function t(n){var t={baseUrl:function(n){u=n},defaultFetchOptions:function(n){o=n}};n(t)}function e(t,e){var i=u+e.url,a=e.query,c=e.data;return delete e.url,delete e.query,e.method=t,e.body=c,e.json=!0,(0,r.extend)(e,o),n(i,a,e)}function i(n){if(n.id)return n.id;throw"use yawp(id) if your endpoint does not have a @Id field called id"}function a(n){function t(n){return 1===arguments.length?p.where=n:p.where=[].slice.call(arguments),this}function r(n){return p.order=n,this}function o(n){return p.sort=n,this}function i(n){return p.limit=n,this}function a(t){return e("GET",n()).then(t)}function c(){Object.keys(p).length>0&&n.addQueryParameter("q",JSON.stringify(p))}function f(t){c();var e=u+n().url+(n().query?"?"+toUrlParam(n().query):"");return t?decodeURIComponent(e):e}function s(t){return c(),e("GET",n()).then(t)}function d(n){return i(1),s(function(t){var e=0===t.length?null:t[0];n&&n(e)})}function l(n){return s(function(t){if(1!==t.length)throw"called only but got "+t.length+" results";n&&n(t[0])})}var p={};return{where:t,order:r,sort:o,limit:i,fetch:a,list:s,first:d,only:l,url:f}}function c(n){function t(t){return n().data=JSON.stringify(t),e("POST",n())}function r(t){return n().data=JSON.stringify(t),e("PUT",n())}function u(t){return n().data=JSON.stringify(t),e("PATCH",n())}function o(){return e("DELETE",n())}return{create:t,update:r,patch:u,destroy:o}}function f(n){function t(t){return n().url+="/"+t,n()}function r(t){return n.setJson(t),this}function u(t){return n.addQueryParameters(t),this}function o(n){return e("GET",t(n))}function i(n){return e("PUT",t(n))}function a(n){return e("PATCH",t(n))}function c(n){return e("POST",t(n))}function f(n){return e("DELETE",t(n))}return{json:r,params:u,get:o,put:i,_patch:a,post:c,_delete:f}}function s(n){function t(n){return n?n instanceof Object?i(n):n:""}function e(){return d}function u(n){var r=t(n);return e().url=r+e().url,this}function o(n){return e.addQueryParameter("t",n),this}function s(){return d.async=!1,this}var d={url:t(n),async:!0};return e.setJson=function(n){d.data=JSON.stringify(n)},e.addQueryParameters=function(n){d.query=(0,r.extend)(d.query,n)},e.addQueryParameter=function(n,t){d.query||(d.query={}),d.query[n]=t},(0,r.extend)({from:u,transform:o,sync:s},a(e),c(e),f(e))}function d(n){var t=i(n);return s(t).update(n)}function l(n){var t=i(n);return s(t).patch(n)}function p(n){var t=i(n);return s(t).destroy(n)}var y={config:t,update:d,patch:l,destroy:p};return(0,r.extend)(s,y)};var r=e(2),u="/api",o={};n.exports=t["default"]},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(n){function t(n){var t={async:function(n){a=n},baseUrl:function(n){u=n},resetUrl:function(n){o=n},lazyPropertyKeys:function(n){i=n},bind:function(n,t,r){c[n]=e(v,n,t,r)}};n(t),c.lazy=g()}function e(n,t,e,r){var u=function(){var u=Array.prototype.slice.call(arguments,0);return u.unshift(r),u.unshift(e),u.unshift(t),n.apply(this,u)};return u.endpoint=e,u}function f(){return n(o,null,{method:"GET",async:a}).then(function(){b={},_=[]})}function s(n){var t;for(t in n)if(n.hasOwnProperty(t)){var e=n[t];e instanceof Function?n[t]=e():e instanceof Object&&s(e)}}function d(n){var t={};return(0,r.extend)(t,n),s(t),JSON.stringify(t)}function l(t,e,r){t||console.error("not endpoint?!");var o=u+(e?r[e]:"")+t,i=null,c=n(o,i,{method:"POST",async:a,json:!0,body:d(r)});if(a)return c;var f=null;return c.done(function(n){f=n}).fail(function(n){throw Error("error: "+n)}),f}function p(n,t){return!!T[n]&&!!T[n][t]}function y(n,t,e,r,u){var o=l(t,e,r);return a?(o.then(function(t){b[n][u]=t}),o):(b[n][u]=o,o)}function h(n,t){return b[n]?b[n][t]:(b[n]={},null)}function v(n,t,e,r,u){var o=h(n,r);if(o)return o;if(!u){if(!p(t,r))return null;u=T[t][r]}return a?void _.push(function(){return y(n,t,e,u,r)}):y(n,t,e,u,r)}function x(n){var t={};for(var e in n){var r=n[e],u=r.key,o=r.value;u instanceof Function&&(u=u()),t[u]=o}return t}function m(n,t){function e(e){return function(){return c[n](t)[e]}}var r,u={};for(r=0;r<i.length;r++){var o=i[r];u[o]=e(o)}return u}function O(n){return function(){return x(n)}}function g(){function n(n,t){return function(e,r){if(T[t]){if(T[t][e])return j[t][e]}else T[t]={},j[t]={};T[t][e]=r,j[t][e]=m(n,e)}}var t={};for(var e in c){var r=c[e].endpoint;t[e]=n(e,r)}return t.map=O,t}function P(n){if(!_.length)return void n(b);for(var t=_[0](),e=1,r=_.length;e<r;e++)t=t.then(_[e]);t.then(function(){_=[],n(b)})}var T={},j={},b={},_=[];return c.lazy=g(),c.load=P,c.reset=f,c.map=x,c.config=t,c};var r=e(2),u="/fixtures",o="/_ah/yawp/datastore/delete_all",i=["id"],a=!0,c={};n.exports=t["default"]}])});
//# sourceMappingURL=yawp.min.js.map