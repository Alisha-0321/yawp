!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("yawp",[],t):"object"==typeof exports?exports.yawp=t():n.yawp=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var u=e[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var u=e(1),o=r(u),i=e(3)(o["default"]),a=e(4)(o["default"]);i.fixtures=a,t["default"]=i,n.exports=t["default"]},function(n,t,e){"use strict";function r(n,t){t=t||{},(0,u.extend)(t,{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"});for(var e in t)t.hasOwnProperty(e)&&n.setRequestHeader(e,t[e])}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(n,t,e){var o,i,a,f,c,s;n+=t?"?"+(0,u.toUrlParam)(t):"";var d={fail:function(n){return o=n,s.onreadystatechange(),d},done:function(n){return i=n,s.onreadystatechange(),d},exception:function(n){return a=n,s.onreadystatechange(),d},then:function(n){return f=n,s.onreadystatechange(),d},error:function(n){return c=n,s.onreadystatechange(),d}};return s=new XMLHttpRequest,s.onreadystatechange=function(){4===s.readyState&&(200===s.status?(i&&i(JSON.parse(s.responseText)),f&&f(JSON.parse(s.responseText))):(o&&o(s),c&&c((0,u.extend)({},s,{responseJSON:JSON.parse(s.responseText)})),a&&a(JSON.parse(s.responseText))))},s.open(e.method,n,!e.synchronous),r(s,e.headers),s.send(e.body),d};var u=e(2);n.exports=t["default"]},function(n,t){"use strict";function e(){for(var n=arguments[0]||{},t=1,e=arguments.length;t<e;t++){var r=arguments[t];for(var u in r)n[u]=r[u]}return n}function r(n){return Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.extend=e,t.toUrlParam=r},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(n){function t(n){var t={baseUrl:function(n){u=n},defaultFetchOptions:function(n){o=n}};n(t)}function e(t,e){var i=u+e.url,a=e.query,f=e.data;return delete e.url,delete e.query,e.method=t,e.body=f,(0,r.extend)(e,o),n(i,a,e)}function i(n){if(n.id)return n.id;throw"use yawp(id) if your endpoint does not have a @Id field called id"}function a(n){function t(n){return 1===arguments.length?p.where=n:p.where=[].slice.call(arguments),this}function r(n){return p.order=n,this}function o(n){return p.sort=n,this}function i(n){return p.limit=n,this}function a(t){return e("GET",n()).done(t)}function f(){Object.keys(p).length>0&&n.addQueryParameter("q",JSON.stringify(p))}function c(t){f();var e=u+n().url+(n().query?"?"+toUrlParam(n().query):"");return t?decodeURIComponent(e):e}function s(t){return f(),e("GET",n()).done(t)}function d(n){return i(1),s(function(t){var e=0===t.length?null:t[0];n&&n(e)})}function l(n){return s(function(t){if(1!==t.length)throw"called only but got "+t.length+" results";n&&n(t[0])})}var p={};return{where:t,order:r,sort:o,limit:i,fetch:a,list:s,first:d,only:l,url:c}}function f(n){function t(t){return n().data=JSON.stringify(t),e("POST",n())}function r(t){return n().data=JSON.stringify(t),e("PUT",n())}function u(t){return n().data=JSON.stringify(t),e("PATCH",n())}function o(){return e("DELETE",n())}return{create:t,update:r,patch:u,destroy:o}}function c(n){function t(t){return n().url+="/"+t,n()}function r(t){return n.setJson(t),this}function u(t){return n.addQueryParameters(t),this}function o(n){return e("GET",t(n))}function i(n){return e("PUT",t(n))}function a(n){return e("PATCH",t(n))}function f(n){return e("POST",t(n))}function c(n){return e("DELETE",t(n))}return{json:r,params:u,get:o,put:i,_patch:a,post:f,_delete:c}}function s(n){function t(n){return n?n instanceof Object?i(n):n:""}function e(){return d}function u(n){var r=t(n);return e().url=r+e().url,this}function o(n){return e.addQueryParameter("t",n),this}function s(){return d.async=!1,this}var d={url:t(n),async:!0};return e.setJson=function(n){d.data=JSON.stringify(n)},e.addQueryParameters=function(n){d.query=(0,r.extend)(d.query,n)},e.addQueryParameter=function(n,t){d.query||(d.query={}),d.query[n]=t},(0,r.extend)({from:u,transform:o,sync:s},a(e),f(e),c(e))}function d(n){var t=i(n);return s(t).update(n)}function l(n){var t=i(n);return s(t).patch(n)}function p(n){var t=i(n);return s(t).destroy(n)}var y={config:t,update:d,patch:l,destroy:p};return(0,r.extend)(s,y)};var r=e(2),u="/api",o={};n.exports=t["default"]},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(n){function t(n){var t={baseUrl:function(n){u=n},resetUrl:function(n){o=n},lazyPropertyKeys:function(n){i=n},bind:function(n,t,r){a[n]=e(y,t,r)}};n(t),a.lazy=m()}function e(n,t,e){var r=function(){var r=Array.prototype.slice.call(arguments,0);return r.unshift(e),r.unshift(t),n.apply(this,r)};return r.endpoint=t,r}function f(){n(o,null,{method:"GET",synchronous:!0}),P={}}function c(n){var t;for(t in n)if(n.hasOwnProperty(t)){var e=n[t];e instanceof Function?n[t]=e():e instanceof Object&&c(e)}}function s(n){var t={};return(0,r.extend)(t,n),c(t),JSON.stringify(t)}function d(t,e,r){var o=null;t||console.error("not endpoint?!");var i=u+(e?r[e]:"")+t,a=null;return n(i,a,{method:"POST",synchronous:!0,body:s(r)}).done(function(n){o=n}).fail(function(n){throw Error("error: "+n)}),o}function l(n,t){return P[n]?P[n][t]:(P[n]={},null)}function p(n,t){return!!O[n]&&!!O[n][t]}function y(n,t,e,r){var u=l(n,e);if(u)return u;if(!r){if(!p(n,e))return null;r=O[n][e]}return u=d(n,t,r),P[n][e]=u,u}function h(n){var t={};for(var e in n){var r=n[e],u=r.key,o=r.value;u instanceof Function&&(u=u()),t[u]=o}return t}function v(n,t){function e(e){return function(){return a[n](t)[e]}}var r,u={};for(r=0;r<i.length;r++){var o=i[r];u[o]=e(o)}return u}function x(n){return function(){return h(n)}}function m(){function n(n,t){return function(e,r){if(O[t]){if(O[t][e])return g[t][e]}else O[t]={},g[t]={};O[t][e]=r,g[t][e]=v(n,e)}}var t={};for(var e in a){var r=a[e].endpoint;t[e]=n(e,r)}return t.map=x,t}var O={},g={},P={};return a.lazy=m(),a.reset=f,a.map=h,a.config=t,a};var r=e(2),u="/fixtures",o="/_ah/yawp/datastore/delete_all",i=["id"],a={};n.exports=t["default"]}])});
//# sourceMappingURL=yawp.min.js.map